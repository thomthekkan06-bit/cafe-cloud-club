<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caf√© Cloud Club | Order</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --primary: #FF4500; 
            --secondary: #2d3436;
            --bg: #F9FAFC;
            --white: #ffffff;
            --dark-text: #2d3436;
            --grey-text: #8395a7;
            --radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.05);
            --veg-color: #27ae60;
            --non-veg-color: #c0392b;
            --disabled: #bdc3c7;
            --discount-color: #e67e22;
        }

        * { box-sizing: border-box; outline: none; }
        
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background-color: var(--bg);
            color: var(--secondary);
            height: 100vh;
            display: flex;
            overflow: hidden; 
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* --- LAYOUT GRID --- */
        .dashboard {
            display: grid;
            grid-template-columns: 220px 1fr 320px; 
            width: 100%;
            height: 100%;
            transition: opacity 0.3s ease;
        }

        /* --- 1. LEFT SIDEBAR (CATEGORIES) --- */
        .left-sidebar {
            background: var(--white);
            border-right: 1px solid #eee;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .left-sidebar .brand-title {
            font-size: 1.4rem;
            margin-bottom: 2px; 
            color: var(--primary);
            font-weight: 700;
            line-height: 1.2;
        }

        .brand-subtitle {
            font-size: 0.85rem;
            color: var(--secondary);
            font-weight: 500;
            margin-bottom: 2px;
        }

        .brand-est {
            font-size: 0.7rem;
            color: #b2bec3;
            font-style: italic;
            margin-bottom: 15px; 
            letter-spacing: 0.5px;
        }

        .store-timings-box, .store-address-box {
            background: #f8f9fa;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 0.75rem;
            color: var(--grey-text);
        }
        
        .store-timings-box h4, .store-address-box h4 {
            margin: 0 0 5px 0;
            color: var(--primary);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .timing-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
        }

        .store-address-box { margin-bottom: 20px; }
        .store-address-box p { margin: 0 0 5px 0; line-height: 1.4; }
        .store-address-box a { color: var(--secondary); text-decoration: none; font-weight: 600; }

        /* --- FILTERS --- */
        .filter-list { display: flex; flex-direction: column; gap: 10px; }
        .filter-item { font-weight: 500; color: var(--grey-text); cursor: pointer; padding: 12px 15px; border-radius: 8px; font-size: 0.9rem; transition: all 0.2s ease; display: flex; align-items: center; justify-content: space-between; }
        .filter-item:hover { background: #fff0eb; color: var(--primary); }
        .filter-item.active { color: var(--primary); background: #fff0eb; font-weight: 700; border-right: 3px solid var(--primary); }
        
        /* Special Button for Offers Page */
        .offers-link-btn {
            background: linear-gradient(135deg, #2d3436 0%, #000000 100%);
            color: #FFD700 !important;
            border: 1px solid #FFD700;
            margin-bottom: 10px;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .offers-link-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .dev-credit { font-size: 0.7rem; color: #b2bec3; text-align: center; margin-top: 20px; padding-top: 10px; }
        .dev-credit span { display: block; margin-bottom: 2px; }
        .dev-credit a { color: var(--primary); font-weight: 700; text-decoration: none; font-size: 0.75rem; }
        .sidebar-credit { display: block; border-top: 1px solid #eee; }
        .mobile-bottom-credit { display: none; width: 100%; border-top: 1px dashed #eee; margin-bottom: 30px; }

        /* --- 2. MAIN CONTENT (CENTER) --- */
        .main-content { padding: 20px 30px; overflow-y: auto; display: flex; flex-direction: column; background: var(--bg); transition: background-color 0.3s ease; }

        .mobile-info-card { display: none; background: var(--white); padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; text-align: center; box-shadow: var(--shadow); }
        .mobile-brand-title { color: var(--primary); font-size: 1.3rem; font-weight: 700; margin: 0 0 10px 0; }
        .mobile-info-row { display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.85rem; color: var(--secondary); margin-bottom: 5px; line-height: 1.4; }
        .mobile-info-row.small-text { font-size: 0.75rem; color: var(--grey-text); margin-top: 8px; border-top: 1px dashed #eee; padding-top: 8px; }
        .mobile-info-row a { color: var(--secondary); text-decoration: none; font-weight: 600; }

        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; gap: 20px; flex-shrink: 0; }
        .search-box { background: var(--white); padding: 10px 15px; border-radius: 10px; flex: 1; display: flex; align-items: center; gap: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.03); border: 1px solid #eee; transition: background-color 0.3s ease, border-color 0.3s ease; }
        .search-box input { border: none; width: 100%; font-family: inherit; font-size: 0.9rem; background: transparent; color: inherit; }

        /* --- DAILY SPECIAL SECTION STYLES --- */
        .daily-offer-section { background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%); border: 2px solid var(--primary); border-radius: 15px; margin-bottom: 25px; padding: 20px; color: white; box-shadow: 0 10px 25px rgba(255, 69, 0, 0.15); position: relative; overflow: hidden; text-align: center; display: none; flex-shrink: 0; }
        .offer-header { font-size: 1rem; font-weight: 700; color: var(--primary); margin-bottom: 10px; letter-spacing: 2px; text-transform: uppercase; }
        .daily-card h3 { font-size: 1.6rem; margin: 0 0 5px 0; color: #fff; }
        .offer-items { background: rgba(255, 255, 255, 0.08); padding: 15px; border-radius: 10px; margin-top: 15px; text-align: left; }
        .daily-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; border-bottom: 1px dashed rgba(255,255,255,0.2); padding-bottom: 8px; }
        .daily-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .daily-price { font-weight: bold; color: #2ecc71; font-size: 1.1rem; white-space: nowrap; }
        .daily-off { background-color: #e74c3c; padding: 2px 6px; border-radius: 4px; font-size: 0.8rem; color: white; white-space: nowrap; }
        .pulse-icon { display: inline-block; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* --- PROMO BANNERS --- */
        .promo-section { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; scroll-behavior: smooth; scrollbar-width: none; flex-shrink: 0; min-height: 190px; width: 100%; z-index: 10; position: relative; }
        .promo-section::-webkit-scrollbar { display: none; }
        .promo-card { min-width: 280px; height: 150px; border-radius: 15px; padding: 20px; color: white; display: flex; flex-direction: column; justify-content: center; position: relative; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease; flex-shrink: 0; }
        .promo-card:hover { transform: translateY(-3px); }
        .promo-card h3 { margin: 0 0 5px 0; font-size: 1.4rem; font-weight: 700; }
        .promo-card p { margin: 0 0 15px 0; font-size: 0.85rem; opacity: 0.9; line-height: 1.4; }
        .code-badge { background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 6px; font-weight: 600; font-size: 0.9rem; width: fit-content; border: 1px dashed rgba(255,255,255,0.6); }
        .promo-icon { position: absolute; right: -10px; bottom: -10px; font-size: 100px; opacity: 0.2; transform: rotate(-15deg); }

        .bg-gradient-1 { background: linear-gradient(135deg, #FF4500, #ff9f43); }
        .bg-gradient-2 { background: linear-gradient(135deg, #8e44ad, #3498db); }
        .bg-gradient-3 { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .bg-gradient-4 { background: linear-gradient(135deg, #eb3349, #f45c43); }

        /* --- NEW OFFERS PAGE STYLING (REDESIGNED) --- */
        /* DEFAULT IS NOW LIGHT MODE */
        .offers-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999; /* Highest z-index */
            background: #ffffff; 
            background-color: rgba(255, 255, 255, 0.98); /* Light bg by default */
            backdrop-filter: blur(8px);
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            transition: background-color 0.3s ease;
        }
        .offers-view.active { display: block; }

        .offers-page-header {
            max-width: 900px;
            margin: 0 auto 30px auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0,0,0,0.05); /* Light mode header bg */
            padding: 15px 25px;
            border-radius: 50px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .offers-page-header h2 { font-size: 1.5rem; letter-spacing: 1px; }

        .offers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        /* Ticket Style Card - Light Mode Default */
        .offer-full-card {
            background: #ffffff;
            color: var(--secondary);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid #ddd;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            animation: slideUp 0.5s ease backwards;
        }
        
        .offer-full-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 15px 40px rgba(255, 69, 0, 0.15);
        }

        .offer-upper { padding: 25px; position: relative; }
        
        /* Decorative circle for ticket look */
        .offer-upper::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: -10px;
            width: 20px;
            height: 20px;
            background: #ffffff; /* Match light bg */
            border-radius: 50%;
            border: 1px solid #ddd; /* border fix for cutout */
            z-index: 2;
        }
        .offer-upper::before {
            content: '';
            position: absolute;
            bottom: -10px;
            right: -10px;
            width: 20px;
            height: 20px;
            background: #ffffff; /* Match light bg */
            border-radius: 50%;
            border: 1px solid #ddd;
            z-index: 2;
        }

        .offer-day-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 4px 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .offer-title { font-size: 1.3rem; font-weight: 700; color: var(--secondary); margin-bottom: 8px; }
        .offer-desc { font-size: 0.9rem; color: var(--grey-text); line-height: 1.6; }
        
        .offer-divider {
            height: 0;
            border-top: 2px dashed #ddd;
            margin: 0 10px;
        }

        .offer-lower {
            padding: 15px 25px;
            background: rgba(0,0,0,0.03);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .offer-code-display {
            background: transparent;
            color: var(--primary);
            font-family: monospace;
            font-size: 1.1rem;
            font-weight: 700;
            border: 1px dashed var(--primary);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            width: 100%;
        }
        
        .offer-code-display:hover {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.4);
        }
        .offer-code-display:active { transform: scale(0.95); }

        .tnc-section {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #ddd;
            color: var(--secondary);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .tnc-section h3 { color: var(--primary); margin-top: 0; }
        .tnc-list { padding-left: 20px; font-size: 0.85rem; line-height: 1.7; }
        .tnc-list li { margin-bottom: 5px; }

        .offers-view .back-btn { color: var(--secondary); border: 1px solid rgba(0,0,0,0.1); padding: 8px 15px; border-radius: 30px; }
        .offers-view .back-btn:hover { background: rgba(0,0,0,0.05); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* --- FILTERS --- */
        .advanced-filters { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; align-items: center; flex-shrink: 0; }
        .adv-select { padding: 8px 12px; border-radius: 20px; border: 1px solid #ddd; background: var(--white); color: var(--secondary); font-size: 0.85rem; cursor: pointer; font-family: inherit; min-width: 100px; }
        .toggle-chip { padding: 8px 15px; border-radius: 20px; border: 1px solid #ddd; background: var(--white); color: var(--secondary); font-size: 0.85rem; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 6px; }
        .toggle-chip.active { background: var(--secondary); color: var(--white); border-color: var(--secondary); }
        .mobile-cart-btn { display: none; background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 50px; cursor: pointer; font-weight: 600; box-shadow: 0 4px 15px rgba(255, 69, 0, 0.4); z-index: 100; }

        /* --- MENU ITEMS --- */
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 15px; padding-bottom: 40px; flex-grow: 1; }
        .food-card { background: var(--white); border-radius: var(--radius); padding: 15px; box-shadow: var(--shadow); transition: transform 0.2s, background-color 0.3s ease; display: flex; flex-direction: column; justify-content: space-between; border-left: 4px solid #ccc; min-height: 100px; }
        .food-card.veg { border-left-color: var(--veg-color); }
        .food-card.non-veg { border-left-color: var(--non-veg-color); }
        .food-card:hover { transform: translateY(-3px); }
        .card-top { margin-bottom: 10px; }
        .food-title { font-weight: 600; font-size: 0.95rem; margin-bottom: 3px; color: var(--secondary); line-height: 1.3; display: flex; align-items: center; }
        .type-emoji { margin-right: 6px; font-size: 0.85rem; }
        .food-meta { font-size: 0.7rem; color: var(--grey-text); font-weight: 500; text-transform: uppercase; padding-left: 2px; margin-bottom: 10px; }

        .options-area { margin: 10px 0; padding-top: 10px; border-top: 1px dashed #eee; }
        .option-label { display: block; font-size: 0.8rem; color: var(--grey-text); margin-bottom: 4px; cursor: pointer; }
        .option-label input { margin-right: 5px; accent-color: var(--primary); }
        .note-input { width: 100%; padding: 8px; border: 1px solid #eee; background: #f9f9f9; border-radius: 6px; font-size: 0.8rem; margin-top: 5px; font-family: inherit; }
        .price-row { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
        .price { font-weight: 700; font-size: 1.1rem; color: var(--secondary); }
        .add-btn-mini { background: #f1f2f6; color: var(--secondary); padding: 6px 15px; border-radius: 20px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; font-weight: 600; transition: 0.2s; gap: 5px; }
        .add-btn-mini:hover { background: var(--primary); color: white; }

        /* --- 3. RIGHT SIDEBAR (CART) --- */
        .order-sidebar { background: var(--white); padding: 25px; display: flex; flex-direction: column; border-left: 1px solid #eee; height: 100vh; transition: background-color 0.3s ease, border-color 0.3s ease; }
        .cart-header-mobile { display: none; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .back-btn { background: transparent; border: none; font-size: 1.2rem; color: var(--primary); cursor: pointer; display: flex; align-items: center; gap: 10px; font-weight: 600; }
        .section-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; color: var(--secondary); }
        .cart-items-container { flex: 1; overflow-y: auto; margin-bottom: 15px; padding-right: 5px; }
        .cart-item { display: flex; justify-content: space-between; margin-bottom: 12px; align-items: flex-start; padding-bottom: 12px; border-bottom: 1px solid #f5f5f5; }
        .cart-details { flex: 1; padding-right: 5px; }
        .cart-name { font-size: 0.85rem; font-weight: 600; margin-bottom: 2px; display: block; color: var(--secondary); line-height: 1.3; }
        .cart-price { font-size: 0.8rem; color: var(--grey-text); }
        .qty-wrapper { display: flex; align-items: center; gap: 8px; background: #F4F6F8; padding: 2px 6px; border-radius: 6px; transition: background-color 0.3s ease; height: 28px; }
        .qty-btn { border: none; background: transparent; cursor: pointer; font-weight: bold; color: var(--secondary); font-size: 0.9rem; padding: 0 4px;}
        
        .coupon-section { margin-bottom: 15px; display: flex; gap: 8px; }
        .coupon-input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; font-size: 0.85rem; text-transform: uppercase; }
        .coupon-btn { border: none; padding: 0 15px; border-radius: 8px; font-weight: 600; font-size: 0.85rem; transition: all 0.3s ease; }
        .coupon-btn:not(:disabled) { background-color: var(--primary); color: white; cursor: pointer; box-shadow: 0 2px 8px rgba(255, 69, 0, 0.3); }
        .coupon-btn:not(:disabled):hover { background-color: #e03e00; }
        .coupon-btn:disabled { background-color: #e0e0e0; color: #888; cursor: not-allowed; box-shadow: none; }
        .coupon-msg { font-size: 0.8rem; margin-bottom: 10px; min-height: 1.2em; }
        .coupon-msg.error { color: #e74c3c; }
        .coupon-msg.success { color: #27ae60; }

        .cart-summary { border-top: 1px solid #eee; padding-top: 15px; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.9rem; color: var(--grey-text); }
        .summary-row.discount-row { color: var(--discount-color); font-weight: 600; }
        .summary-total { color: var(--secondary); font-weight: 700; font-size: 1.2rem; margin-top: 10px; margin-bottom: 20px; color: var(--primary); }
        .checkout-btn { background: var(--primary); color: white; width: 100%; padding: 14px; border: none; border-radius: 10px; font-size: 0.95rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 10px rgba(255, 69, 0, 0.2); transition: 0.3s; }
        .checkout-btn:disabled { background: var(--disabled); cursor: not-allowed; box-shadow: none; }

        /* --- MODAL --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(4px); }
        .modal-card { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); max-height: 90vh; overflow-y: auto; transition: background-color 0.3s ease; }
        .modal-card h3 { color: var(--secondary); }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 0.8rem; color: var(--grey-text); margin-bottom: 5px; }
        .input-field { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; background: white; color: var(--secondary); }
        select.input-field { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; }

        .radio-group { display: flex; gap: 15px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .radio-label { display: flex; align-items: center; cursor: pointer; font-weight: 500; font-size: 0.9rem; color: var(--secondary); }
        .radio-label input { margin-right: 8px; accent-color: var(--primary); width: 16px; height: 16px; }

        /* --- SUCCESS SCREEN --- */
        .success-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--white); z-index: 3000; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px; }
        .success-icon-container { width: 80px; height: 80px; background: #e3f9e5; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; animation: bounceIn 0.8s ease; }
        .success-icon { font-size: 40px; color: var(--veg-color); }
        .success-title { font-size: 1.8rem; color: var(--secondary); font-weight: 700; margin-bottom: 10px; }
        .success-subtitle { font-size: 1rem; color: var(--grey-text); margin-bottom: 40px; max-width: 400px; }
        .action-buttons-container { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 320px; }
        .whatsapp-final-btn { background: #25D366; color: white; padding: 16px 30px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); transition: transform 0.2s; text-decoration: none; width: 100%; }
        .call-final-btn { background: var(--primary); color: white; padding: 16px 30px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(255, 69, 0, 0.3); transition: transform 0.2s; text-decoration: none; width: 100%; }
        .whatsapp-final-btn:hover, .call-final-btn:hover { transform: translateY(-2px); }
        @keyframes bounceIn { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.2); } 100% { transform: scale(1); opacity: 1; } }

        /* Responsive Breakpoints */
        @media (max-width: 1000px) {
            .dashboard { grid-template-columns: 1fr; grid-template-rows: auto 1fr; display: flex; flex-direction: column; }
            .left-sidebar { grid-row: 1; width: 100%; border-right: none; border-bottom: 1px solid #eee; padding: 10px 20px; flex-direction: row; overflow-x: auto; align-items: center; gap: 10px; height: auto; flex-shrink: 0; }
            .left-sidebar .brand-title, .brand-subtitle, .brand-est, .store-timings-box, .store-address-box { display: none; }
            .sidebar-credit { display: none !important; }
            .mobile-bottom-credit { display: block !important; }
            .mobile-info-card { display: block; }
            .filter-list { flex-direction: row; width: 100%; }
            .filter-item { white-space: nowrap; padding: 8px 12px; background: #f1f2f6; border-radius: 20px; border: 1px solid #ddd; }
            .filter-item.active { border-right: 1px solid var(--primary); border-color: var(--primary); }
            .main-content { flex: 1; padding: 20px; }
            .order-sidebar { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; background: var(--bg); padding: 20px; overflow-y: auto; }
            .order-sidebar.active { display: flex; }
            .cart-header-mobile { display: flex; }
            .mobile-cart-btn { display: block; position: fixed; bottom: 20px; right: 20px; z-index: 1500; transition: transform 0.2s ease; }
            .offers-link-btn { white-space: nowrap; padding: 8px 12px; border-radius: 20px; margin: 0; }
        }

        /* --- DARK MODE --- */
        @media (prefers-color-scheme: dark) {
            :root { --bg: #121212; --white: #1e1e1e; --secondary: #ecf0f1; --dark-text: #ecf0f1; --grey-text: #a4b0be; --shadow: 0 4px 12px rgba(0,0,0,0.5); --disabled: #555; }
            .left-sidebar, .order-sidebar, .cart-item, .radio-group, .cart-summary, .options-area, .coupon-input, .cart-header-mobile, .store-timings-box, .store-address-box, .mobile-info-card, .tnc-section { border-color: #333 !important; }
            .search-box, .input-field, .filter-item, .note-input, .adv-select, .toggle-chip, .mobile-info-row.small-text { border-color: #444 !important; }
            .search-box, .input-field, .qty-wrapper, .note-input, .adv-select, .toggle-chip, .coupon-input { background-color: #2d3436 !important; color: var(--secondary) !important; }
            .toggle-chip.active { background: var(--secondary) !important; color: var(--white) !important; }
            .add-btn-mini { background: #2d3436; color: #fff; }
            .filter-item { background-color: #1e1e1e; }
            .filter-item:hover { background: #333; color: var(--primary); }
            .filter-item.active { background: #2d3436; }
            .store-timings-box, .store-address-box, .mobile-info-card { background: #2d3436; }
            .store-address-box a, .mobile-info-row a { background: #1e1e1e; color: var(--secondary); }
            .modal-card { background: #1e1e1e; color: var(--secondary); }
            .success-screen { background: #121212; }
            .success-icon-container { background: #0f3d16; }
            .coupon-btn:disabled { background-color: #444; color: #888; }
            select.input-field { background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ecf0f1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); }
            ::-webkit-scrollbar { width: 8px; }
            ::-webkit-scrollbar-track { background: #121212; }
            ::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }
            .dev-credit { border-color: #333; color: #777; }
            
            /* --- OFFERS PAGE DARK MODE OVERRIDES --- */
            .offers-view { background-color: rgba(18, 18, 18, 0.98) !important; background: #121212; }
            .offers-page-header { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); }
            .offer-full-card { background: #1e1e1e; color: #ecf0f1; border-color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
            .offer-title { color: #fff; }
            .offer-upper::after, .offer-upper::before { background: #121212; border: none; } /* Dark cutouts */
            .offer-divider { border-color: #333; }
            .offer-lower { background: rgba(0,0,0,0.2); }
            .tnc-section { background: #1e1e1e; border-color: #333; color: #b2bec3; }
            .offers-view .back-btn { color: white; border-color: rgba(255,255,255,0.2); }
            .offers-view .back-btn:hover { background: rgba(255,255,255,0.1); }
        }
    </style>
</head>
<body>

<div id="offers-view" class="offers-view">
    <div class="offers-page-header">
        <button class="back-btn" onclick="toggleOffersPage()">
            <i class="fas fa-arrow-left"></i> Back
        </button>
        <h2 style="margin:0; color:var(--primary); font-size:1.2rem;">OFFER ZONE</h2>
        <div style="width:70px;"></div> </div>

    <div class="offers-grid">
        <div class="offer-full-card" style="animation-delay: 0.1s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Monday Only</div>
                <div class="offer-title">Meat-Up Monday üçî</div>
                <div class="offer-desc">
                    Grab 1 Chicken Burger + 1 Fries for just ‚Çπ222!<br>
                    Plus, get ‚Çπ20 OFF on strictly 1 Beef Burger.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('MONBURGER')">
                    <i class="fas fa-copy"></i> MONBURGER
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.2s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Tuesday Only</div>
                <div class="offer-title">Twisted Tuesday üçù</div>
                <div class="offer-desc">
                    All Pastas (Alfredo, Pesto, Red) flat at ‚Çπ179.<br>
                    A perfect Italian treat for your cravings.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('TUEPASTA')">
                    <i class="fas fa-copy"></i> TUEPASTA
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.3s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Wednesday Only</div>
                <div class="offer-title">Wicked Wednesday ü•©</div>
                <div class="offer-desc">
                    Steak Lover? Get 1 Steak for ‚Çπ300.<br>
                    Shake Lover? Get 1 Premium Shake for ‚Çπ120.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower" style="gap:10px; flex-wrap: wrap;">
                <button class="offer-code-display" onclick="copyCode('WEDSTEAK')" style="flex:1;">WEDSTEAK</button>
                <button class="offer-code-display" onclick="copyCode('WEDSHAKE')" style="flex:1;">WEDSHAKE</button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.4s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Thursday Only</div>
                <div class="offer-title">The Thursday Club ü•™</div>
                <div class="offer-desc">
                    Get any Sandwich + any Chiller for just ‚Çπ189.<br>
                    Light, refreshing, and delicious.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('THUSAND')">
                    <i class="fas fa-copy"></i> THUSAND
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.5s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Friday Only</div>
                <div class="offer-title">Fri-Yay Fry-Day üçü</div>
                <div class="offer-desc">
                    Veg Loaded Fries @ ‚Çπ119<br>
                    Chicken Loaded Fries @ ‚Çπ179
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('FRIFRIES')">
                    <i class="fas fa-copy"></i> FRIFRIES
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.6s;">
            <div class="offer-upper">
                <div class="offer-day-badge">Saturday Only</div>
                <div class="offer-title">Rock n' Roll Saturday üåØ</div>
                <div class="offer-desc">
                    Any Roll (Tandoori, Pesto, Chipotle) for ‚Çπ129.<br>
                    Grab a quick bite on the go!
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('SATROLL')">
                    <i class="fas fa-copy"></i> SATROLL
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.7s; border-color: #FFD700;">
            <div class="offer-upper" style="background: linear-gradient(135deg, #2d3436, #000);">
                <div class="offer-day-badge" style="background:#FFD700; color:black;">Sunday Special</div>
                <div class="offer-title" style="color:white !important;">Fam-Jam Feast üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <div class="offer-desc">
                    The Ultimate Combo:<br>
                    1 Penne Pasta + 1 Slider + 1 Shake = ‚Çπ399
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower" style="background: #2d3436;">
                <button class="offer-code-display" onclick="copyCode('SUNFEAST')" style="color:#FFD700; border-color:#FFD700;">
                    <i class="fas fa-copy"></i> SUNFEAST
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.8s;">
            <div class="offer-upper">
                <div class="offer-day-badge" style="background:#888;">Any Day</div>
                <div class="offer-title">Combo 15% OFF</div>
                <div class="offer-desc">
                    Buy Strictly: 1 Burger + 1 Fries + 1 Drink.<br>
                    Get flat 15% discount on the total.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('CLOUD15')">
                    <i class="fas fa-copy"></i> CLOUD15
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 0.9s;">
            <div class="offer-upper">
                <div class="offer-day-badge" style="background:#888;">Any Day</div>
                <div class="offer-title">Quick Bite 20%</div>
                <div class="offer-desc">
                    Buy Strictly: 1 Wrap + 1 Side Dish.<br>
                    Perfect for a light lunch!
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('QUICK20')">
                    <i class="fas fa-copy"></i> QUICK20
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 1.0s;">
            <div class="offer-upper">
                <div class="offer-day-badge" style="background:#888;">Any Day</div>
                <div class="offer-title">Steak & Sip 13%</div>
                <div class="offer-desc">
                    Buy Strictly: 1 Butcher's Best Steak + 1 Shake.<br>
                    Get flat 13% discount on the total.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('STEAK13')">
                    <i class="fas fa-copy"></i> STEAK13
                </button>
            </div>
        </div>

        <div class="offer-full-card" style="animation-delay: 1.1s;">
            <div class="offer-upper">
                <div class="offer-day-badge" style="background:#888;">Any Day</div>
                <div class="offer-title">Family Feast 14%</div>
                <div class="offer-desc">
                    Huge Order? Buy 2 Burgers, 2 Mains, 1 Loaded Fries & 4 Drinks.<br>
                    Get flat 14% discount on the total.
                </div>
            </div>
            <div class="offer-divider"></div>
            <div class="offer-lower">
                <button class="offer-code-display" onclick="copyCode('FEAST14')">
                    <i class="fas fa-copy"></i> FEAST14
                </button>
            </div>
        </div>

    </div>

    <div class="tnc-section">
        <h3><i class="fas fa-file-contract"></i> Terms and Conditions</h3>
        <ul class="tnc-list">
            <li><strong>Single Coupon Policy:</strong> Only one coupon code can be applied per order. Offers cannot be combined or stacked.</li>
            <li><strong>Validity:</strong> Daily offers (e.g., Meat-Up Monday) are strictly valid only on their respective days. The system will reject the code if used on a different day.</li>
            <li><strong>Strict Items:</strong> Combo offers require the exact items mentioned in the description to be present in the cart. If extra items are added, they will be charged at regular prices.</li>
            <li><strong>Availability:</strong> All offers are subject to stock availability. Caf√© Cloud Club reserves the right to modify or withdraw offers without prior notice.</li>
            <li><strong>Delivery:</strong> Delivery charges are calculated separately and are not subject to discounts unless specified otherwise.</li>
            <li><strong>Time limits:</strong> Orders must be placed within store operating hours (2 PM - 3 AM) to be accepted.</li>
        </ul>
    </div>

    <div class="dev-credit">
        <span>Page Built & Designed by</span>
        <a href="#">Thomsons Networks</a>
    </div>
</div>

<div class="success-screen" id="success-view">
    <div class="success-icon-container">
        <i class="fas fa-check success-icon"></i>
    </div>
    <h1 class="success-title">Order Ready, <span id="customer-name-display"></span>!</h1>
    <p class="success-subtitle">Your order details are ready. Please click the button below to send them to us via WhatsApp.</p>
    
    <div class="action-buttons-container">
        <button class="whatsapp-final-btn" id="send-wa-btn">
            <i class="fab fa-whatsapp"></i> Send Order to WhatsApp
        </button>
        
        <a href="tel:+917907660093" class="call-final-btn">
            <i class="fas fa-phone-alt"></i> Call to Confirm
        </a>
    </div>
</div>

<div class="dashboard" id="main-dashboard">
    <div class="left-sidebar">
        <h2 class="brand-title">Caf√© Cloud Club</h2>
        <div class="brand-subtitle">Cafe and Eatery</div>
        <div class="brand-est">Established Since 2021</div>

        <div class="store-timings-box">
            <h4><i class="far fa-clock"></i> Store Timings</h4>
            <div class="timing-row">
                <span>Pickup/Dine-In:</span>
                <span>3pm - 3am</span>
            </div>
            <div class="timing-row">
                <span>Delivery:</span>
                <span>2pm - 3am</span>
            </div>
        </div>

        <div class="store-address-box">
            <h4><i class="fas fa-map-marker-alt"></i> Location</h4>
            <p>Opposite KFC, Muringoor,<br>Chalakudy, Kerala 680309</p>
            <p>
                <a href="tel:+917907660093"><i class="fas fa-phone-alt"></i> +91 79076 60093</a>
            </p>
        </div>

        <div class="filter-list">
            <div class="filter-item offers-link-btn" onclick="toggleOffersPage()">
                <i class="fas fa-gift"></i> All Offers & T&C
            </div>

            <div class="filter-item active" onclick="setCategoryFilter('All', this)">All Items</div>
            <div class="filter-item" onclick="setCategoryFilter('Bun-Tastic Burgers', this)">Bun-Tastic Burgers</div>
            <div class="filter-item" onclick="setCategoryFilter('Butcher\'s Best', this)">Butcher's Best</div>
            <div class="filter-item" onclick="setCategoryFilter('Italian Indulgence', this)">Italian Indulgence</div>
            <div class="filter-item" onclick="setCategoryFilter('Freshly Folded', this)">Freshly Folded</div>
            <div class="filter-item" onclick="setCategoryFilter('Rice Harmony', this)">Rice Harmony</div>
            <div class="filter-item" onclick="setCategoryFilter('Salad Symphony', this)">Salad Symphony</div>
            <div class="filter-item" onclick="setCategoryFilter('Toasty Treats', this)">Toasty Treats</div>
            <div class="filter-item" onclick="setCategoryFilter('Warm Whispers', this)">Warm Whispers</div>
            <div class="filter-item" onclick="setCategoryFilter('Nibbles & Bits', this)">Nibbles & Bits</div>
            <div class="filter-item" onclick="setCategoryFilter('Icy Sips', this)">Icy Sips</div>
            <div class="filter-item" onclick="setCategoryFilter('Mojito Magic', this)">Mojito Magic</div>
            <div class="filter-item" onclick="setCategoryFilter('Nature\'s Nectar', this)">Nature's Nectar</div>
            <div class="filter-item" onclick="setCategoryFilter('Whipped Wonders', this)">Whipped Wonders</div>
            <div class="filter-item" onclick="setCategoryFilter('Frosted Leaf', this)">Frosted Leaf</div>
            <div class="filter-item" onclick="setCategoryFilter('ADD-ON', this)">ADD-ON</div>
        </div>

        <div class="dev-credit sidebar-credit">
            <span>Page Built & Designed by</span>
            <a href="#">Thomsons Networks</a>
        </div>

    </div>

    <div class="main-content">
        <div class="mobile-info-card">
            <h2 class="mobile-brand-title">Caf√© Cloud Club</h2>
            <div class="mobile-info-row">
                <i class="fas fa-map-marker-alt"></i> Opposite KFC, Muringoor, Chalakudy
            </div>
            <div class="mobile-info-row">
                <a href="tel:+917907660093"><i class="fas fa-phone-alt"></i> +91 79076 60093</a>
            </div>
            <div class="mobile-info-row small-text">
                <i class="far fa-clock"></i> Pickup: 3pm-3am | Delivery: 2pm-3am
            </div>
        </div>

        <div class="header-bar">
            <div class="search-box">
                <i class="fas fa-search" style="color: #ccc;"></i>
                <input type="text" id="search-input" placeholder="Search..." onkeyup="updateSearch()">
            </div>
            <button class="mobile-cart-btn" onclick="toggleCartPage()">
                <i class="fas fa-shopping-bag"></i> View Cart <span id="mobile-count">(0)</span>
            </button>
        </div>

        <div id="daily-special-container" class="daily-offer-section">
            <div class="offer-header">
                <span class="pulse-icon">üî•</span> TODAY'S EXCLUSIVE OFFER <span class="pulse-icon">üî•</span>
            </div>

            <div id="offer-1" class="daily-card" style="display: none;">
                <h3>Meat-Up Monday üçî</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">MONBURGER</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>Strictly: 1 Chicken Burger + 1 Fries</span>
                        <span class="daily-price">‚Çπ222</span>
                    </div>
                    <div class="daily-row">
                        <span>Strictly: 1 Beef Burger</span>
                        <span class="daily-off">‚Çπ20 OFF</span>
                    </div>
                      <small style="color:#aaa; display:block; margin-top:5px;">(Extra items charged fully)</small>
                </div>
            </div>

            <div id="offer-2" class="daily-card" style="display: none;">
                <h3>Twisted Tuesday Treats üçù</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">TUEPASTA</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>Any Pasta (Alfredo/Pesto/Red)</span>
                        <span class="daily-price">‚Çπ179</span>
                    </div>
                </div>
            </div>

            <div id="offer-3" class="daily-card" style="display: none;">
                <h3>Wicked Wednesday ü•© / ü•§</h3>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>1 Steak @ ‚Çπ300</span>
                        <span class="daily-price">Code: <strong>WEDSTEAK</strong></span>
                    </div>
                    <div class="daily-row">
                        <span>1 Premium Shake @ ‚Çπ120</span>
                        <span class="daily-price">Code: <strong>WEDSHAKE</strong></span>
                    </div>
                    <small style="color:#aaa; display:block; margin-top:5px;">(Use strictly one code per order)</small>
                </div>
            </div>

            <div id="offer-4" class="daily-card" style="display: none;">
                <h3>The Thursday Club ü•™</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">THUSAND</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>Any Sandwich + Chiller</span>
                        <span class="daily-price">‚Çπ189</span>
                    </div>
                </div>
            </div>

            <div id="offer-5" class="daily-card" style="display: none;">
                <h3>Fri-Yay Fry-Day üçü</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">FRIFRIES</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>Loaded Fries (Veg)</span>
                        <span class="daily-price">‚Çπ119</span>
                    </div>
                    <div class="daily-row">
                        <span>Loaded Fries (Chicken)</span>
                        <span class="daily-price">‚Çπ179</span>
                    </div>
                    <small style="color:#aaa; display:block; margin-top:5px;">(Max 1 Item)</small>
                </div>
            </div>

            <div id="offer-6" class="daily-card" style="display: none;">
                <h3>Rock n' Roll Saturday üåØ</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">SATROLL</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>Any Roll (Tandoori/Pesto/Chipotle)</span>
                        <span class="daily-price">‚Çπ129</span>
                    </div>
                    <small style="color:#aaa; display:block; margin-top:5px;">(Max 1 Roll)</small>
                </div>
            </div>

            <div id="offer-0" class="daily-card" style="display: none;">
                <h3>Sunday Fam-Jam Feast üë®‚Äçüë©‚Äçüëß‚Äçüë¶</h3>
                <p style="font-size:0.9rem; color:#ccc;">Use Code: <strong style="color:#FFD700; border:1px dashed #FFD700; padding:2px 5px; border-radius:4px;">SUNFEAST</strong></p>
                <div class="offer-items">
                    <div class="daily-row">
                        <span>1 Penne Pasta + 1 Slider + 1 Shake</span>
                        <span class="daily-price">‚Çπ399</span>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:10px; font-size:0.8rem; cursor:pointer; text-decoration:underline;" onclick="toggleOffersPage()">
                View all future offers & T&C
            </div>
        </div>

        <div class="promo-section">
            <div class="promo-card bg-gradient-1" onclick="copyCode('CLOUD15')">
                <h3>15% OFF</h3>
                <p>Combo: Burger + Fries + Drink<br>Strictly 1 of each!</p>
                <div class="code-badge">Use: CLOUD15</div>
                <i class="fas fa-hamburger promo-icon"></i>
            </div>

            <div class="promo-card bg-gradient-2" onclick="copyCode('STEAK13')">
                <h3>Steak & Sip</h3>
                <p>13% OFF on Butcher's Best<br>+ Whipped Wonder Shake</p>
                <div class="code-badge">Use: STEAK13</div>
                <i class="fas fa-drumstick-bite promo-icon"></i>
            </div>

            <div class="promo-card bg-gradient-3" onclick="copyCode('QUICK20')">
                <h3>Quick Bite 20%</h3>
                <p>Any Wrap + Side Dish<br>Perfect for a light lunch!</p>
                <div class="code-badge">Use: QUICK20</div>
                <i class="fas fa-stopwatch promo-icon"></i>
            </div>

            <div class="promo-card bg-gradient-4" onclick="copyCode('FEAST14')">
                <h3>Family Feast</h3>
                <p>14% OFF Huge Order<br>2 Burgers, 2 Mains & more</p>
                <div class="code-badge">Use: FEAST14</div>
                <i class="fas fa-users promo-icon"></i>
            </div>
        </div>

        <div class="advanced-filters">
            <select class="adv-select" onchange="setSort(this.value)">
                <option value="default">Sort By...</option>
                <option value="low-high">Price: Low to High</option>
                <option value="high-low">Price: High to Low</option>
            </select>

            <select class="adv-select" onchange="setType(this.value)">
                <option value="all">Diet: All</option>
                <option value="veg">Veg Only</option>
                <option value="non-veg">Non-Veg Only</option>
            </select>

            <select class="adv-select" onchange="setIngredient(this.value)">
                <option value="all">Ingredient: All</option>
                <option value="Chicken">Chicken</option>
                <option value="Beef">Beef</option>
                <option value="Fish">Fish</option>
                <option value="Panner">Paneer</option>
            </select>

            <div class="toggle-chip" onclick="toggleUnder200(this)" id="price-chip">
                <i class="fas fa-tag"></i> Under ‚Çπ200
            </div>
        </div>

        <div class="menu-grid" id="menu-root">
        </div>

        <div class="dev-credit mobile-bottom-credit">
            <span>Page Built & Designed by</span>
            <a href="#">Thomsons Networks</a>
        </div>

    </div>

    <div class="order-sidebar" id="cart-sidebar">
        <div class="cart-header-mobile">
            <button class="back-btn" onclick="toggleCartPage()">
                <i class="fas fa-arrow-left"></i> Back to Menu
            </button>
        </div>

        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="section-title" style="margin:0;">Current Order</div>
        </div>
        <br>
        
        <div class="cart-items-container" id="cart-items-list">
        </div>
        
        <div class="coupon-section">
            <input type="text" id="coupon-input" class="coupon-input" placeholder="COUPON CODE">
            <button class="coupon-btn" id="coupon-apply-btn" onclick="applyCoupon()" disabled>APPLY</button>
        </div>
        <div id="coupon-msg" class="coupon-msg"></div>

        <div class="cart-summary">
            <div class="summary-row">
                <span>Sub Total</span>
                <span id="sub-total">0</span>
            </div>
            <div class="summary-row">
                <span>Packing Charges</span>
                <span id="packing-total">0</span>
            </div>
            
            <div class="summary-row discount-row" id="discount-row" style="display:none;">
                <span>Coupon (15% OFF)</span>
                <span id="discount-total">-0</span>
            </div>

            <div class="summary-row">
                <span>Delivery Fee</span>
                <span>Calculated by Agent</span>
            </div>
            <div class="summary-row summary-total">
                <span>Total</span>
                <span id="grand-total">0</span>
            </div>
            <button class="checkout-btn" id="main-checkout-btn" onclick="openCheckoutModal()" disabled>Cart Empty</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="checkout-modal">
    <div class="modal-card">
        <h3 style="margin-top: 0; margin-bottom: 15px;">Checkout</h3>
        
        <div class="radio-group">
            <label class="radio-label">
                <input type="radio" name="orderType" value="Delivery" checked onchange="toggleOrderFields()"> Delivery
            </label>
            <label class="radio-label">
                <input type="radio" name="orderType" value="Pickup" onchange="toggleOrderFields()"> Pickup / Dine-In
            </label>
        </div>

        <div class="input-group">
            <label>Full Name</label>
            <input type="text" class="input-field" id="c-name" placeholder="John Doe">
        </div>
        <div class="input-group">
            <label>Phone Number (10 digits)</label>
            <input type="tel" class="input-field" id="c-phone" placeholder="9876543210" pattern="[0-9]*">
        </div>
        <div class="input-group">
            <label>Email Address</label>
            <input type="email" class="input-field" id="c-email" placeholder="john@example.com">
        </div>

        <div class="input-group">
            <label id="time-label">Preferred Delivery Time</label>
            <select class="input-field" id="c-time">
                <option value="" disabled selected>Select a time...</option>
                <option value="ASAP">ASAP (Standard)</option>
                <option value="In 30-45 mins">In 30-45 mins</option>
                <option value="In 1 Hour">In 1 Hour</option>
                <option value="In 1.5 Hours">In 1.5 Hours</option>
                <option value="In 2 Hours">In 2 Hours</option>
                <option value="Schedule Later (Call to confirm)">Schedule Later (Call to confirm)</option>
            </select>
        </div>
        
        <div class="input-group" id="address-group">
            <label>Delivery Address</label>
            <textarea class="input-field" id="c-address" rows="3" placeholder="Flat No, Street, Landmark..."></textarea>
        </div>

        <div class="input-group">
            <label>Special Instructions (Optional)</label>
            <textarea class="input-field" id="c-instruction" rows="2" placeholder='e.g. "Doorbell doesn&#39;t work", "Dog in"'></textarea>
        </div>

        <button class="checkout-btn" onclick="finalizeOrder()">Confirm Order</button>
        <button style="background:none; border:none; width:100%; padding:10px; margin-top:10px; cursor:pointer; color:#777;" onclick="closeCheckoutModal()">Cancel</button>
    </div>
</div>

<script>
    /* --- DATA --- */
    const whatsappNumber = "917907660093";
    const MIN_ORDER_VAL = 200; 
    
    // Website Icons
    const vegIcon = decodeURIComponent('%F0%9F%9F%A2'); 
    const nonVegIcon = decodeURIComponent('%F0%9F%94%B4');
    const rupeeSign = decodeURIComponent('%E2%82%B9');

    const menuData = [
        { name: "Cheesy Beef Melt", price: 180, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Cheesy Chicken Melt", price: 200, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Chicken Slider Burger - Pesto", price: 90, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Chicken Slider Burger - Tandoori", price: 90, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Chicken Zinger Burger", price: 190, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Classic Beef Burger", price: 160, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Cloud Special Chicken Burger", price: 190, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Double Decker Beef Burger", price: 220, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Egg Burger", price: 100, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Honey Bbq Chicken Burger", price: 190, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Pesto Chicken Burger", price: 190, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Tandoori Burger Chicken", price: 170, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Tandoori Special Chicken Burger", price: 180, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Tropical Beef Burger", price: 190, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Tropical Pesto Chicken Burger", price: 220, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Tropical Tandoori Chicken Burger", price: 200, category: "Bun-Tastic Burgers", type: "non-veg" },
        { name: "Veg Burger (Panner)", price: 170, category: "Bun-Tastic Burgers", type: "veg" },
        { name: "Veg Slider Burger", price: 90, category: "Bun-Tastic Burgers", type: "veg" },

        { name: "Bbq Chicken Steak", price: 310, category: "Butcher's Best", type: "non-veg" },
        { name: "Beef Peppercorn Steak", price: 340, category: "Butcher's Best", type: "non-veg" },
        { name: "Beef Velvet Sauce Steak", price: 340, category: "Butcher's Best", type: "non-veg" },
        { name: "Fish Steak - BASA", price: 350, category: "Butcher's Best", type: "non-veg" },
        { name: "Fish Steak - KING", price: 350, category: "Butcher's Best", type: "non-veg" },
        { name: "Mediterranean BBQ Chicken Steak", price: 350, category: "Butcher's Best", type: "non-veg" },
        { name: "Panner Tandoori Steak", price: 340, category: "Butcher's Best", type: "veg" },
        { name: "Panner Velvet Sauce", price: 340, category: "Butcher's Best", type: "veg" },
        { name: "Peri Peri Chicken Steak", price: 350, category: "Butcher's Best", type: "non-veg" },
        { name: "Pesto Chicken Steak", price: 310, category: "Butcher's Best", type: "non-veg" },
        { name: "Tandoori Chicken Steak", price: 350, category: "Butcher's Best", type: "non-veg" },
        { name: "Velvet Sauce Chicken Steak", price: 350, category: "Butcher's Best", type: "non-veg" },

        { name: "Beef Wrap", price: 170, category: "Freshly Folded", type: "non-veg" },
        { name: "Chicken Chipotle Wrap", price: 160, category: "Freshly Folded", type: "non-veg" },
        { name: "Chicken Pesto Wrap", price: 160, category: "Freshly Folded", type: "non-veg" },
        { name: "Chicken Tandoori Wrap", price: 160, category: "Freshly Folded", type: "non-veg" },
        { name: "Veg Wrap", price: 140, category: "Freshly Folded", type: "veg" },

        { name: "Arabiata Chicken Pasta - Penne", price: 210, category: "Italian Indulgence", type: "non-veg" },
        { name: "Arabiata Chicken Pasta - Spaghetti", price: 240, category: "Italian Indulgence", type: "non-veg" },
        { name: "Black Garlic Chicken Penne Pasta", price: 280, category: "Italian Indulgence", type: "non-veg" },
        { name: "Classic Alfredo Chicken Pasta - Penne", price: 210, category: "Italian Indulgence", type: "non-veg" },
        { name: "Classic Alfredo Chicken Pasta - Spaghetti", price: 240, category: "Italian Indulgence", type: "non-veg" },
        { name: "Cloud Special Chicken Pasta - Penne", price: 230, category: "Italian Indulgence", type: "non-veg" },
        { name: "Cloud Special Chicken Pasta - Spaghetti", price: 260, category: "Italian Indulgence", type: "non-veg" },
        { name: "Creamy Spaghetti - NonVeg", price: 300, category: "Italian Indulgence", type: "non-veg" },
        { name: "Creamy Spaghetti - Veg", price: 300, category: "Italian Indulgence", type: "veg" },
        { name: "Pesto Pasta Chicken - Penne", price: 230, category: "Italian Indulgence", type: "non-veg" },
        { name: "Pesto Pasta Chicken - Spaghetti", price: 260, category: "Italian Indulgence", type: "non-veg" },
        { name: "Shrimp Pasta - Penne", price: 290, category: "Italian Indulgence", type: "non-veg" },
        { name: "Shrimp Pasta - Spaghetti", price: 320, category: "Italian Indulgence", type: "non-veg" },
        { name: "Special Pesto Pasta Chicken - Penne", price: 230, category: "Italian Indulgence", type: "non-veg" },
        { name: "Special Pesto Pasta Chicken - Spaghetti", price: 260, category: "Italian Indulgence", type: "non-veg" },
        { name: "Veg Pasta - Arabiata - Penne", price: 200, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Classic Alfredo - Penne", price: 200, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Cloud Special - Penne", price: 200, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Pesto - Penne", price: 200, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Special Pesto - Penne", price: 240, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Classic Alfredo - Spaghetti", price: 230, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Cloud Special - Spaghetti", price: 230, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Pesto - Spaghetti", price: 230, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Special Pesto - Spaghetti", price: 270, category: "Italian Indulgence", type: "veg" },
        { name: "Veg Pasta - Arabiata - Spaghetti", price: 230, category: "Italian Indulgence", type: "veg" },

        { name: "Chicken Fried Rice", price: 150, category: "Rice Harmony", type: "non-veg" },
        { name: "Cloud Club Power Bowl - Chicken", price: 200, category: "Rice Harmony", type: "non-veg" },
        { name: "Cloud Club Power Bowl - Veg", price: 170, category: "Rice Harmony", type: "veg" },
        { name: "Peri Peri Rice Bowl - Non-Veg", price: 150, category: "Rice Harmony", type: "non-veg" },
        { name: "Peri Peri Rice Bowl - Veg", price: 140, category: "Rice Harmony", type: "veg" },
        { name: "Plain Rice Bowl", price: 120, category: "Rice Harmony", type: "veg" },
        { name: "Tandoori Rice Bowl - Non-Veg", price: 160, category: "Rice Harmony", type: "non-veg" },
        { name: "Tandoori Rice Bowl - Veg", price: 150, category: "Rice Harmony", type: "veg" },

        { name: "Chicken Pesto Salad", price: 190, category: "Salad Symphony", type: "non-veg" },
        { name: "Classic Chicken Caesar Salad", price: 170, category: "Salad Symphony", type: "non-veg" },
        { name: "Cloud Special Chicken Salad", price: 170, category: "Salad Symphony", type: "non-veg" },
        { name: "Egg White Salad", price: 160, category: "Salad Symphony", type: "non-veg" },
        { name: "Grilled Beef Salad", price: 190, category: "Salad Symphony", type: "non-veg" },
        { name: "Paneer Pesto Salad", price: 170, category: "Salad Symphony", type: "veg" },
        { name: "Pesto Veg Salad", price: 160, category: "Salad Symphony", type: "veg" },
        { name: "Shrimp Classic Caesar Salad", price: 250, category: "Salad Symphony", type: "non-veg" },
        { name: "Sprout Fusion Salad", price: 160, category: "Salad Symphony", type: "non-veg" },
        { name: "Tuna Salad", price: 180, category: "Salad Symphony", type: "non-veg" },
        { name: "Veg Caesar Salad (Paneer)", price: 170, category: "Salad Symphony", type: "veg" },
        { name: "Veg Roasted Salad", price: 140, category: "Salad Symphony", type: "veg" },
        { name: "Veg Waldorf Salad", price: 170, category: "Salad Symphony", type: "veg" },

        { name: "Chicken Ham Club Sandwich", price: 170, category: "Toasty Treats", type: "non-veg" },
        { name: "Egg White Sandwich", price: 150, category: "Toasty Treats", type: "non-veg" },
        { name: "Grilled Chicken & Cheese Sandwich", price: 160, category: "Toasty Treats", type: "non-veg" },
        { name: "Regular Chicken Sandwich", price: 150, category: "Toasty Treats", type: "non-veg" },
        { name: "Tuna Club Sandwich", price: 170, category: "Toasty Treats", type: "non-veg" },
        { name: "Veg Club Sandwich", price: 150, category: "Toasty Treats", type: "veg" },
        
        { name: "Tomato Cream Soup", price: 130, category: "Warm Whispers", type: "veg" },
        { name: "Creamy Chicken Soup", price: 140, category: "Warm Whispers", type: "non-veg" },

        { name: "BBQ Chicken Popcorn", price: 180, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Beef Loaded Fries", price: 220, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Beef Omelette", price: 120, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Cheese Egg Omelette", price: 130, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Egg Omelette", price: 130, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Loaded Fries", price: 210, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Lollipop", price: 160, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Nachos", price: 180, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Nuggets", price: 90, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Popcorn - Peri Peri", price: 210, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Popcorn - Plain", price: 190, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Sausage - BBQ", price: 170, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Sausage - Plain", price: 170, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Sausage - Tandoori", price: 170, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Strips 5 Pcs - Peri Peri", price: 180, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Chicken Strips 5 Pcs - Plain", price: 170, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Cordon Bleu Chicken", price: 180, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Fish Fingers - Peri Peri", price: 200, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Fish Fingers", price: 180, category: "Nibbles & Bits", type: "non-veg" },
        { name: "French Fries - Herbal", price: 130, category: "Nibbles & Bits", type: "veg" },
        { name: "French Fries - Peri Peri", price: 120, category: "Nibbles & Bits", type: "veg" },
        { name: "French Fries - Salted", price: 100, category: "Nibbles & Bits", type: "veg" },
        { name: "Momo (Chicken)", price: 140, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Mushroom Omelette", price: 120, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Potato Wedges - Peri Peri", price: 140, category: "Nibbles & Bits", type: "veg" },
        { name: "Potato Wedges - Plain", price: 130, category: "Nibbles & Bits", type: "veg" },
        { name: "Scotch Egg", price: 160, category: "Nibbles & Bits", type: "non-veg" },
        { name: "Veg - Loaded Fries", price: 150, category: "Nibbles & Bits", type: "veg" },
        { name: "Wings + Fries", price: 200, category: "Nibbles & Bits", type: "non-veg" },

        { name: "Black Current Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Green Apple Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Guava Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Lychee Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Mango Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Peach Chillers", price: 90, category: "Icy Sips", type: "veg" },
        { name: "Watermelon Chillers", price: 90, category: "Icy Sips", type: "veg" },

        { name: "Citrus Blue Glacier Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Deep Blue Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Frizzante Lemone Masala", price: 70, category: "Mojito Magic", type: "veg" },
        { name: "Green Apple Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Grenadine Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Lavender Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Lemon Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Lychee Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Mango Mojito", price: 120, category: "Mojito Magic", type: "veg" },
        { name: "Passion Fruit Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Peach Mojito", price: 125, category: "Mojito Magic", type: "veg" },
        { name: "Watermelon Mojito", price: 125, category: "Mojito Magic", type: "veg" },

        { name: "Apple Juice", price: 120, category: "Nature's Nectar", type: "veg" },
        { name: "Carrot & Lemon Juice", price: 80, category: "Nature's Nectar", type: "veg" },
        { name: "Carrot Juice", price: 80, category: "Nature's Nectar", type: "veg" },
        { name: "Celery, Apple & Ginger Juice", price: 110, category: "Nature's Nectar", type: "veg" },
        { name: "Cucumber & Carrot Juice", price: 90, category: "Nature's Nectar", type: "veg" },
        { name: "Cucumber, Lemon & Mint Juice", price: 70, category: "Nature's Nectar", type: "veg" },
        { name: "Fresh Lime", price: 40, category: "Nature's Nectar", type: "veg" },
        { name: "Lemon & Celery Juice", price: 50, category: "Nature's Nectar", type: "veg" },
        { name: "Mango Juice", price: 80, category: "Nature's Nectar", type: "veg" },
        { name: "Mosambi Juice", price: 90, category: "Nature's Nectar", type: "veg" },
        { name: "Muskmelon Juice", price: 80, category: "Nature's Nectar", type: "veg" },
        { name: "Orange Juice", price: 90, category: "Nature's Nectar", type: "veg" },
        { name: "Papaya Juice", price: 70, category: "Nature's Nectar", type: "veg" },
        { name: "Pineapple & Carrot Juice", price: 90, category: "Nature's Nectar", type: "veg" },
        { name: "Pineapple Juice", price: 90, category: "Nature's Nectar", type: "veg" },
        { name: "Pomegranate Juice", price: 100, category: "Nature's Nectar", type: "veg" },
        { name: "Watermelon Juice", price: 80, category: "Nature's Nectar", type: "veg" },
        { name: "Zesty Pineapple Breeze", price: 90, category: "Nature's Nectar", type: "veg" },

        { name: "Arabian Milkshake", price: 135, category: "Whipped Wonders", type: "veg" },
        { name: "Avocado Mango Milkshake", price: 150, category: "Whipped Wonders", type: "veg" },
        { name: "Avocado Banana Almonds", price: 150, category: "Whipped Wonders", type: "veg" },
        { name: "Avocado Milkshake", price: 140, category: "Whipped Wonders", type: "veg" },
        { name: "Black Current Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Black Grape Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Blue Berry Milkshake", price: 140, category: "Whipped Wonders", type: "veg" },
        { name: "Blue Milkshake", price: 140, category: "Whipped Wonders", type: "veg" },
        { name: "Butter Peanut", price: 130, category: "Whipped Wonders", type: "veg" },
        { name: "Caramel Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Chikku Shake", price: 130, category: "Whipped Wonders", type: "veg" },
        { name: "ChocoButter Peanut Shake", price: 140, category: "Whipped Wonders", type: "veg" },
        { name: "Chocolate Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Dry Fruit Milkshake", price: 135, category: "Whipped Wonders", type: "veg" },
        { name: "Lotus Biscoff Milkshake", price: 140, category: "Whipped Wonders", type: "veg" },
        { name: "Lychee Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Mango Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Mango Mint Milkshake", price: 135, category: "Whipped Wonders", type: "veg" },
        { name: "Milo Shake", price: 150, category: "Whipped Wonders", type: "veg" },
        { name: "Oreo Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Roasted Dry Fruit Shake", price: 160, category: "Whipped Wonders", type: "veg" },
        { name: "Strawberry & Mango Shake", price: 135, category: "Whipped Wonders", type: "veg" },
        { name: "Strawberry Milkshake", price: 125, category: "Whipped Wonders", type: "veg" },
        { name: "Tender Coconut Milkshake", price: 135, category: "Whipped Wonders", type: "veg" },
        { name: "Vanilla Milkshake", price: 115, category: "Whipped Wonders", type: "veg" },

        { name: "Lemon Ice Tea", price: 125, category: "Frosted Leaf", type: "veg" },
        { name: "Lychee Ice Tea", price: 125, category: "Frosted Leaf", type: "veg" },
        { name: "Passion Fruit Ice Tea", price: 125, category: "Frosted Leaf", type: "veg" },
        { name: "Peach Ice Tea", price: 125, category: "Frosted Leaf", type: "veg" },

        { name: "Garlic Bread (4)", price: 50, category: "ADD-ON", type: "veg" },
        { name: "Garlic Sauce", price: 20, category: "ADD-ON", type: "veg" },
        { name: "Hash Brown", price: 20, category: "ADD-ON", type: "veg" },
        { name: "Hummus", price: 50, category: "ADD-ON", type: "veg" }
    ];

    let cart = {};
    let activeCoupon = null; // Track applied coupon

    /* --- FILTER STATES --- */
    let currentCategory = 'All';
    let currentSearch = '';
    let currentSort = 'default';
    let currentType = 'all'; // veg, non-veg
    let currentIngredient = 'all'; // Chicken, Beef, Fish, Paneer
    let isUnder200 = false;

    /* --- FILTER FUNCTIONS --- */
    function setCategoryFilter(cat, btn) {
        document.querySelectorAll('.filter-item').forEach(b => b.classList.remove('active'));
        if(btn) btn.classList.add('active');
        currentCategory = cat;
        renderMenu();
        if(window.innerWidth <= 1000) {
            document.querySelector('.main-content').scrollTop = 0;
        }
    }

    function updateSearch() {
        currentSearch = document.getElementById('search-input').value;
        renderMenu();
    }

    function setSort(val) {
        currentSort = val;
        renderMenu();
    }

    function setType(val) {
        currentType = val;
        renderMenu();
    }

    function setIngredient(val) {
        currentIngredient = val;
        renderMenu();
    }

    function toggleUnder200(btn) {
        isUnder200 = !isUnder200;
        if(isUnder200) btn.classList.add('active');
        else btn.classList.remove('active');
        renderMenu();
    }

    /* --- NEW FUNCTION TO COPY PROMO CODES --- */
    function copyCode(code) {
        const couponInput = document.getElementById('coupon-input');
        const couponBtn = document.getElementById('coupon-apply-btn');
        couponInput.value = code;
        couponBtn.disabled = false;
        
        // Hide offers page if open
        document.getElementById('offers-view').classList.remove('active');
        document.getElementById('main-dashboard').style.display = 'grid';

        if(window.innerWidth <= 1000) { toggleCartPage(); }
        couponInput.scrollIntoView({behavior: "smooth"});
        couponInput.style.borderColor = "var(--primary)";
        setTimeout(() => couponInput.style.borderColor = "#ddd", 500);
    }
    
    function toggleOffersPage() {
        const offersView = document.getElementById('offers-view');
        const mainDash = document.getElementById('main-dashboard');
        
        if (offersView.classList.contains('active')) {
            offersView.classList.remove('active');
            // Allow body scrolling again if needed
        } else {
            offersView.classList.add('active');
            // Reset scroll to top
            offersView.scrollTop = 0;
        }
    }

    /* --- MAIN RENDER FUNCTION --- */
    function renderMenu() {
        const root = document.getElementById('menu-root');
        root.innerHTML = '';

        let filteredItems = menuData.filter(item => {
            if (currentCategory !== 'All' && item.category !== currentCategory) return false;
            if (currentSearch && !item.name.toLowerCase().includes(currentSearch.toLowerCase())) return false;
            if (currentType === 'veg' && item.type !== 'veg') return false;
            if (currentType === 'non-veg' && item.type !== 'non-veg') return false;
            if (isUnder200 && item.price >= 200) return false;
            if (currentIngredient !== 'all') {
                const nameLower = item.name.toLowerCase();
                const ingLower = currentIngredient.toLowerCase();
                if(ingLower === 'panner' || ingLower === 'paneer') {
                    if(!nameLower.includes('panner') && !nameLower.includes('paneer')) return false;
                } else {
                    if(!nameLower.includes(ingLower)) return false;
                }
            }
            return true;
        });

        if (currentSort === 'low-high') {
            filteredItems.sort((a, b) => a.price - b.price);
        } else if (currentSort === 'high-low') {
            filteredItems.sort((a, b) => b.price - a.price);
        }

        if (filteredItems.length === 0) {
            root.innerHTML = '<div style="grid-column: 1/-1; text-align:center; color:#999; padding: 20px;">No items found matching your filters.</div>';
            return;
        }

        filteredItems.forEach((item, index) => {
            const originalIndex = menuData.indexOf(item);
            const card = document.createElement('div');
            card.className = `food-card ${item.type}`;
            card.id = `card-${originalIndex}`;
            
            const emojiStr = item.type === 'veg' ? vegIcon : nonVegIcon;
            
            let optionsHtml = '';
            let hasOptions = false;
            const cheeseCats = ["Bun-Tastic Burgers", "Italian Indulgence", "Freshly Folded", "Toasty Treats"];
            if (cheeseCats.includes(item.category)) {
                hasOptions = true;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Extra Cheese" data-price="15"> Extra Cheese (+${rupeeSign}15)</label>`;
            }
            if (item.category === "Italian Indulgence") {
                hasOptions = true;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Garlic Bread" data-price="40"> Add Garlic Bread (+${rupeeSign}40)</label>`;
            }
            if (item.category === "Butcher's Best") {
                hasOptions = true;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Extra Hashbrown" data-price="40"> Extra Hashbrown (+${rupeeSign}40)</label>`;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Tossed Rice" data-price="40"> Tossed Rice (+${rupeeSign}40)</label>`;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Sorted / Boiled Vegges" data-price="40"> Sorted / Boiled Vegges (+${rupeeSign}40)</label>`;
            }
            if (item.category === "Whipped Wonders") {
                hasOptions = true;
                optionsHtml += `<label class="option-label"><input type="checkbox" data-name="Extra Ice Cream (Thick Shake)" data-price="30"> Extra Ice Cream (+${rupeeSign}30)</label>`;
            }
            if (item.category !== "ADD-ON") {
                hasOptions = true;
                optionsHtml += `<input type="text" class="note-input" placeholder="Special Note (e.g. Spicy)">`;
            }
            if (hasOptions) optionsHtml = `<div class="options-area">${optionsHtml}</div>`;

            card.innerHTML = `
                <div class="card-top">
                    <div class="food-title">
                        <span class="type-emoji">${emojiStr}</span>
                        ${item.name}
                    </div>
                    <div class="food-meta">${item.category}</div>
                    ${optionsHtml}
                </div>
                <div class="price-row">
                    <div class="price">${rupeeSign}${item.price}</div>
                    <button class="add-btn-mini" onclick="addItemFromCard(${originalIndex})">
                        ADD <i class="fas fa-plus"></i>
                    </button>
                </div>
            `;
            root.appendChild(card);
        });
    }

    /* --- CART FUNCTIONS --- */
    
    function addItemFromCard(index) {
        const item = menuData[index];
        const card = document.getElementById(`card-${index}`);
        
        const checkboxes = card.querySelectorAll('input[type="checkbox"]:checked');
        let finalPrice = item.price;
        let modifiers = [];
        
        checkboxes.forEach(cb => {
            finalPrice += parseInt(cb.dataset.price);
            modifiers.push(cb.dataset.name);
        });

        const noteInput = card.querySelector('.note-input');
        const noteText = noteInput ? noteInput.value.trim() : '';

        let displayName = item.name;
        if(modifiers.length > 0) displayName += ` [${modifiers.join(', ')}]`;
        if(noteText) displayName += ` (Note: ${noteText})`;

        addToCart(displayName, finalPrice, item.type, item.category);
        
        checkboxes.forEach(cb => cb.checked = false);
        if(noteInput) noteInput.value = '';
    }

    function addToCart(name, price, type, category) {
        if (cart[name]) {
            cart[name].qty++;
        } else {
            cart[name] = { price: price, qty: 1, type: type, category: category };
        }
        renderCart();
        const btn = document.querySelector('.mobile-cart-btn');
        btn.style.transform = "scale(1.2)";
        setTimeout(() => btn.style.transform = "scale(1)", 200);
    }

    function updateQty(name, change) {
        if (cart[name]) {
            cart[name].qty += change;
            if (cart[name].qty <= 0) {
                delete cart[name];
            }
            renderCart();
        }
    }

    /* --- COMBO REQUIREMENTS FOR OLD CODES --- */
    function checkComboRequirements(codeToCheck) {
        if (codeToCheck === 'CLOUD15') {
            let burgerQty = 0; let friesQty = 0; let drinkQty = 0;
            for (let key in cart) {
                const item = cart[key];
                if (item.category === 'Bun-Tastic Burgers') burgerQty += item.qty;
                if (key.includes('French Fries')) friesQty += item.qty;
                if (item.category === 'Icy Sips') drinkQty += item.qty;
            }
            return burgerQty === 1 && friesQty === 1 && drinkQty === 1;
        }
        if (codeToCheck === 'STEAK13') {
            let steakQty = 0; let whippedQty = 0;
            for (let key in cart) {
                const item = cart[key];
                if (item.category === "Butcher's Best") steakQty += item.qty;
                if (item.category === "Whipped Wonders") whippedQty += item.qty;
            }
            return steakQty === 1 && whippedQty === 1;
        }
        if (codeToCheck === 'QUICK20') {
            let wrapQty = 0; let sideQty = 0;
            for (let key in cart) {
                const item = cart[key];
                if (item.category === "Freshly Folded") wrapQty += item.qty;
                if (key.includes("French Fries") || key === "Chicken Nuggets") sideQty += item.qty;
            }
            return wrapQty === 1 && sideQty === 1;
        }
        if (codeToCheck === 'FEAST14') {
            let burgerQty = 0; let mainCourseQty = 0; let loadedFriesQty = 0; let drinkQty = 0;
            for (let key in cart) {
                const item = cart[key];
                if (item.category === "Bun-Tastic Burgers") burgerQty += item.qty;
                if (item.category === "Italian Indulgence" || item.category === "Rice Harmony") mainCourseQty += item.qty;
                if (key.includes("Loaded Fries")) loadedFriesQty += item.qty;
                if (item.category === "Nature's Nectar") drinkQty += item.qty;
            }
            return burgerQty === 2 && mainCourseQty === 2 && loadedFriesQty === 1 && drinkQty === 4;
        }
        return false;
    }

    /* --- HELPER FOR SUNDAY OFFER CHECK --- */
    function isSundayPasta(name) {
        const n = name.toLowerCase();
        // Must be Penne
        if (!n.includes('penne')) return false;
        // Must be Chicken or Veg
        if (!n.includes('chicken') && !n.includes('veg')) return false;
        // Exclude strict misses (Black Garlic not in allowed list)
        if (n.includes('black garlic')) return false;
        // Allowed flavors
        if (n.includes('pesto') || n.includes('alfredo') || n.includes('arabiata') || n.includes('cloud special')) {
            return true;
        }
        return false;
    }

    /* --- UPDATED APPLY COUPON FUNCTION --- */
    function applyCoupon() {
        const codeInput = document.getElementById('coupon-input');
        const msgBox = document.getElementById('coupon-msg');
        const code = codeInput.value.trim().toUpperCase();
        
        const todayIndex = new Date().getDay(); // 0=Sun, 1=Mon, 2=Tue, 3=Wed...

        // 1. MONDAY: MONBURGER
        if (code === 'MONBURGER') {
            if(todayIndex !== 1) { 
                msgBox.innerText = "This code is only valid on Mondays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'MONBURGER';
            msgBox.innerText = "Meat-Up Monday Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 2. TUESDAY: TUEPASTA
        if (code === 'TUEPASTA') {
            if(todayIndex !== 2) { 
                msgBox.innerText = "This code is only valid on Tuesdays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'TUEPASTA';
            msgBox.innerText = "Twisted Tuesday Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 3. WEDNESDAY: WEDSTEAK (STEAK ONLY)
        if (code === 'WEDSTEAK') {
            if(todayIndex !== 3) { 
                msgBox.innerText = "This code is only valid on Wednesdays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'WEDSTEAK';
            msgBox.innerText = "Wicked Wednesday (Steak) Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 3b. WEDNESDAY: WEDSHAKE (SHAKE ONLY)
        if (code === 'WEDSHAKE') {
            if(todayIndex !== 3) { 
                msgBox.innerText = "This code is only valid on Wednesdays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'WEDSHAKE';
            msgBox.innerText = "Wicked Wednesday (Shake) Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 4. THURSDAY: THUSAND
        if (code === 'THUSAND') {
            if(todayIndex !== 4) { 
                msgBox.innerText = "This code is only valid on Thursdays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            let sandQty = 0; let chillQty = 0;
            for(let key in cart) {
                if(cart[key].category === 'Toasty Treats') sandQty += cart[key].qty;
                if(cart[key].category === 'Icy Sips') chillQty += cart[key].qty;
            }
            if(sandQty >= 1 && chillQty >= 1) {
                activeCoupon = 'THUSAND';
                msgBox.innerText = "Thursday Club Applied!";
                msgBox.className = "coupon-msg success";
            } else {
                msgBox.innerText = "Add 1 Sandwich & 1 Chiller to apply!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null;
            }
            renderCart();
            return;
        }

        // 5. FRIDAY: FRIFRIES
        if (code === 'FRIFRIES') {
            if(todayIndex !== 5) { 
                msgBox.innerText = "This code is only valid on Fridays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'FRIFRIES';
            msgBox.innerText = "Fri-Yay Fry-Day Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 6. SATURDAY: SATROLL
        if (code === 'SATROLL') {
            if(todayIndex !== 6) { 
                msgBox.innerText = "This code is only valid on Saturdays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            activeCoupon = 'SATROLL';
            msgBox.innerText = "Rock n' Roll Saturday Applied!";
            msgBox.className = "coupon-msg success";
            renderCart();
            return;
        }

        // 0. SUNDAY: SUNFEAST
        if (code === 'SUNFEAST') {
            if(todayIndex !== 0) { 
                msgBox.innerText = "This code is only valid on Sundays!";
                msgBox.className = "coupon-msg error";
                activeCoupon = null; renderCart(); return;
            }
            let pastaQty = 0; let sliderQty = 0; let shakeQty = 0;
            for(let key in cart) {
                // Strict check for Pasta
                if(cart[key].category === 'Italian Indulgence' && isSundayPasta(key)) {
                    pastaQty += cart[key].qty;
                }
                // Slider Check
                if(cart[key].category === 'Bun-Tastic Burgers' && key.includes("Slider")) {
                    sliderQty += cart[key].qty;
                }
                // Shake Check
                if(cart[key].category === 'Whipped Wonders') {
                    shakeQty += cart[key].qty;
                }
            }

            if(pastaQty >= 1 && sliderQty >= 1 && shakeQty >= 1) {
                activeCoupon = 'SUNFEAST';
                msgBox.innerText = "Sunday Feast Applied!";
                msgBox.className = "coupon-msg success";
            } else {
                msgBox.innerText = "Need 1 Valid Penne + 1 Slider + 1 Shake";
                msgBox.className = "coupon-msg error";
                activeCoupon = null;
            }
            renderCart();
            return;
        }

        // --- OLD CODES ---
        if (code === 'CLOUD15') {
            if (checkComboRequirements('CLOUD15')) { activeCoupon = 'CLOUD15'; msgBox.innerText = "Coupon Applied! 15% Off"; msgBox.className = "coupon-msg success"; } 
            else { msgBox.innerText = "Strictly: 1 Burger, 1 Fries & 1 Drink"; msgBox.className = "coupon-msg error"; activeCoupon = null; }
            renderCart(); return;
        }
        if (code === 'STEAK13') {
            if (checkComboRequirements('STEAK13')) { activeCoupon = 'STEAK13'; msgBox.innerText = "Steak & Sip Applied! 13% Off"; msgBox.className = "coupon-msg success"; } 
            else { msgBox.innerText = "Strictly: 1 Butcher's Best & 1 Shake"; msgBox.className = "coupon-msg error"; activeCoupon = null; }
            renderCart(); return;
        }
        if (code === 'QUICK20') {
            if (checkComboRequirements('QUICK20')) { activeCoupon = 'QUICK20'; msgBox.innerText = "Quick Bite Applied! 20% Off"; msgBox.className = "coupon-msg success"; } 
            else { msgBox.innerText = "Strictly: 1 Wrap & 1 Side"; msgBox.className = "coupon-msg error"; activeCoupon = null; }
            renderCart(); return;
        }
        if (code === 'FEAST14') {
            if (checkComboRequirements('FEAST14')) { activeCoupon = 'FEAST14'; msgBox.innerText = "Cloud Feast Applied! 14% Off"; msgBox.className = "coupon-msg success"; } 
            else { msgBox.innerText = "Requirements missing for Feast"; msgBox.className = "coupon-msg error"; activeCoupon = null; }
            renderCart(); return;
        }

        msgBox.innerText = "Invalid or Expired Code";
        msgBox.className = "coupon-msg error";
        activeCoupon = null;
        renderCart();
    }

    /* --- UPDATED RENDER CART --- */
    function renderCart() {
        const list = document.getElementById('cart-items-list');
        list.innerHTML = '';
        
        let subTotal = 0;
        let packingTotal = 0;
        let totalCount = 0;
        let hasItems = false;
        const fiveRsCats = ["Bun-Tastic Burgers", "Freshly Folded", "Toasty Treats"];

        for (let key in cart) {
            hasItems = true;
            const item = cart[key];
            const itemTotal = item.price * item.qty;
            subTotal += itemTotal;
            totalCount += item.qty;
            
            let chargePerItem = 0;
            if (item.category === 'ADD-ON') {
                if (key.startsWith("Hummus")) chargePerItem = 7;
                else chargePerItem = 5;
            } else if (fiveRsCats.includes(item.category)) {
                chargePerItem = 5;
            } else {
                chargePerItem = 10;
            }
            packingTotal += (chargePerItem * item.qty);

            if (key.includes("Tossed Rice") || key.includes("Sorted / Boiled Vegges")) {
                packingTotal += (7 * item.qty);
            }

            list.innerHTML += `
                <div class="cart-item">
                    <div class="cart-details">
                        <span class="cart-name">${key}</span>
                        <span class="cart-price">${rupeeSign}${item.price}</span>
                    </div>
                    <div class="qty-wrapper">
                        <button class="qty-btn" onclick="updateQty('${key}', -1)">‚àí</button>
                        <span>${item.qty}</span>
                        <button class="qty-btn" onclick="updateQty('${key}', 1)">+</button>
                    </div>
                </div>
            `;
        }

        if(!hasItems) list.innerHTML = `<div style="text-align: center; color: #ccc; margin-top: 50px;">Cart is empty</div>`;

        // --- DYNAMIC DISCOUNT CALCULATION ---
        let discountVal = 0;
        let discountText = "";

        // MONDAY LOGIC: STRICTLY ANY 1 CHICKEN BURGER + STRICTLY ANY 1 FRIES -> 222
        // AND STRICTLY ANY 1 BEEF BURGER -> -20
        if(activeCoupon === 'MONBURGER') {
            let foundChicken = false;
            let chickenPrice = 0;
            let foundFries = false; // Salted or Peri Peri only
            let friesPrice = 0;
            let foundBeef = false;

            // Iterate through cart to find eligible items
            for(let key in cart) {
                let item = cart[key];
                
                // 1. Find Strictly 1 Chicken Burger (First one encountered)
                if(!foundChicken && item.category === 'Bun-Tastic Burgers' && key.toLowerCase().includes('chicken')) {
                    foundChicken = true;
                    chickenPrice = item.price;
                }

                // 2. Find Strictly 1 Fries (Salted or Peri Peri) (First one encountered)
                // Note: Cart key for fries usually includes "French Fries - Salted" etc.
                if(!foundFries && (key === "French Fries - Salted" || key === "French Fries - Peri Peri")) {
                    foundFries = true;
                    friesPrice = item.price;
                }

                // 3. Find Strictly 1 Beef Burger (First one encountered)
                if(!foundBeef && item.category === 'Bun-Tastic Burgers' && key.toLowerCase().includes('beef')) {
                    foundBeef = true;
                    // Apply Beef Discount immediately (20 OFF)
                    discountVal += 20;
                }
            }

            // Apply Combo Discount if both Chicken and Fries found
            if(foundChicken && foundFries) {
                let comboTotal = chickenPrice + friesPrice;
                // If the sum is greater than 222, the difference is the discount
                if(comboTotal > 222) {
                    discountVal += (comboTotal - 222);
                }
            }
            
            discountText = "Monday Special Applied";
        }

        // TUESDAY LOGIC (Pasta 179)
        if(activeCoupon === 'TUEPASTA') {
            for(let key in cart) {
                let item = cart[key];
                if(item.category === 'Italian Indulgence') {
                      if(item.price > 179) discountVal += (item.price - 179) * item.qty;
                }
            }
            discountText = "Tuesday Pasta Treat";
        }

        // WEDNESDAY LOGIC - STEAK ONLY (Max 1 @ 300)
        if(activeCoupon === 'WEDSTEAK') {
            let steakDiscounted = 0;
            for(let key in cart) {
                let item = cart[key];
                if(item.category === "Butcher's Best" && steakDiscounted < 1) {
                    if(item.price > 300) {
                        discountVal += (item.price - 300); // Discount 1 unit only
                        steakDiscounted++;
                    }
                }
            }
            discountText = "Wed Special (Max 1 Steak)";
        }

        // WEDNESDAY LOGIC - SHAKE ONLY (Max 1 @ 120)
        if(activeCoupon === 'WEDSHAKE') {
            let shakeDiscounted = 0;
            for(let key in cart) {
                let item = cart[key];
                if(item.category === "Whipped Wonders" && key !== "Vanilla Milkshake" && shakeDiscounted < 1) {
                    if(item.price > 120) {
                        discountVal += (item.price - 120); // Discount 1 unit only
                        shakeDiscounted++;
                    }
                }
            }
            discountText = "Wed Special (Max 1 Shake)";
        }

        // THURSDAY LOGIC (Sandwich + Chiller 189)
        if(activeCoupon === 'THUSAND') {
             discountVal = 61; 
             discountText = "Thursday Club";
        }

        // FRIDAY LOGIC (Fries 119/179 - STRICT MAX 1 ITEM)
        if(activeCoupon === 'FRIFRIES') {
            let friesCount = 0;
            for (let key in cart) {
                if (friesCount < 1) {
                    if (key === "Veg - Loaded Fries") {
                        discountVal += (150 - 119);
                        friesCount++;
                    } else if (key === "Chicken Loaded Fries" || key === "Beef Loaded Fries") {
                        discountVal += (cart[key].price - 179);
                        friesCount++;
                    }
                }
            }
            discountText = "Fri-Yay Fries (Max 1)";
        }

        // SATURDAY LOGIC (Rolls 129 - STRICT MAX 1 ITEM)
        if(activeCoupon === 'SATROLL') {
             let rollDiscounted = 0;
             for(let key in cart) {
                 let item = cart[key];
                 if(item.category === "Freshly Folded" && rollDiscounted < 1) {
                     if(item.price > 129) {
                         discountVal += (item.price - 129); // Discount 1 unit only
                         rollDiscounted++;
                     }
                 }
             }
             discountText = "Sat Special (Max 1 Roll)";
        }
        
        // SUNDAY LOGIC (Combo 399) - UPDATED FOR STRICT ITEM CALCULATIONS
        if(activeCoupon === 'SUNFEAST') {
            let foundPasta = false;
            let foundSlider = false;
            let foundShake = false;
            let comboItemsTotal = 0;

            for(let key in cart) {
                let item = cart[key];
                // Take price of 1 Pasta
                if(!foundPasta && item.category === 'Italian Indulgence' && isSundayPasta(key)) {
                    comboItemsTotal += item.price;
                    foundPasta = true;
                }
                // Take price of 1 Slider
                else if(!foundSlider && item.category === 'Bun-Tastic Burgers' && key.includes("Slider")) {
                    comboItemsTotal += item.price;
                    foundSlider = true;
                }
                // Take price of 1 Shake
                else if(!foundShake && item.category === 'Whipped Wonders') {
                    comboItemsTotal += item.price;
                    foundShake = true;
                }
            }
            
            if (foundPasta && foundSlider && foundShake) {
                if (comboItemsTotal > 399) {
                    discountVal = comboItemsTotal - 399;
                } else {
                    discountVal = 0;
                }
                discountText = "Sunday Feast (Combo @ 399)";
            }
        }

        // OLD PERCENTAGE CODES
        if(activeCoupon === 'CLOUD15') { discountVal = Math.round(subTotal * 0.15); discountText = "Coupon (15% OFF)"; }
        if(activeCoupon === 'STEAK13') { discountVal = Math.round(subTotal * 0.13); discountText = "Steak & Sip (13% OFF)"; }
        if(activeCoupon === 'QUICK20') { discountVal = Math.round(subTotal * 0.20); discountText = "Quick Bite (20% OFF)"; }
        if(activeCoupon === 'FEAST14') { discountVal = Math.round(subTotal * 0.14); discountText = "Cloud Feast (14% OFF)"; }

        const discountRow = document.getElementById('discount-row');
        if (discountVal > 0) {
            discountRow.style.display = 'flex';
            discountRow.querySelector('span:first-child').innerText = discountText;
            document.getElementById('discount-total').innerText = `- ${rupeeSign}${discountVal}`;
        } else {
            discountRow.style.display = 'none';
        }

        let grandTotal = (subTotal - discountVal) + packingTotal;

        document.getElementById('sub-total').innerText = rupeeSign + subTotal;
        document.getElementById('packing-total').innerText = rupeeSign + packingTotal;
        document.getElementById('grand-total').innerText = rupeeSign + grandTotal;
        document.getElementById('mobile-count').innerText = `(${totalCount})`;

        const checkoutBtn = document.getElementById('main-checkout-btn');
        if(!hasItems) {
            checkoutBtn.innerText = "Cart Empty";
            checkoutBtn.disabled = true;
        } else if (grandTotal < MIN_ORDER_VAL) {
            checkoutBtn.innerText = `Min Order ${rupeeSign}${MIN_ORDER_VAL}`;
            checkoutBtn.disabled = true;
        } else {
            checkoutBtn.innerText = "Confirm Order";
            checkoutBtn.disabled = false;
        }
    }

    function toggleCartPage() { document.getElementById('cart-sidebar').classList.toggle('active'); }
    function openCheckoutModal() { document.getElementById('checkout-modal').style.display = 'flex'; toggleOrderFields(); }
    function closeCheckoutModal() { document.getElementById('checkout-modal').style.display = 'none'; }
    function toggleOrderFields() {
        const type = document.querySelector('input[name="orderType"]:checked').value;
        const addrGroup = document.getElementById('address-group');
        const timeLabel = document.getElementById('time-label');
        if(type === 'Pickup') { addrGroup.style.display = 'none'; timeLabel.innerText = "Preferred Pickup Time"; } 
        else { addrGroup.style.display = 'block'; timeLabel.innerText = "Preferred Delivery Time"; }
    }

    function checkStoreStatus(orderType) {
        const now = new Date();
        const hour = now.getHours(); 
        if (orderType === 'Delivery') {
            if (hour >= 14 || hour < 3) return { isOpen: true };
            return { isOpen: false, msg: "Delivery is only available from 2:00 PM to 3:00 AM." };
        }
        if (orderType === 'Pickup') {
            if (hour >= 15 || hour < 3) return { isOpen: true };
            return { isOpen: false, msg: "Pickup/Dine-In is only available from 3:00 PM to 3:00 AM." };
        }
        return { isOpen: true };
    }

    function finalizeOrder() {
        const type = document.querySelector('input[name="orderType"]:checked').value;
        const status = checkStoreStatus(type);
        if (!status.isOpen) { alert("Store Closed!\n" + status.msg); return; }

        const name = document.getElementById('c-name').value.trim();
        const phone = document.getElementById('c-phone').value.trim();
        const email = document.getElementById('c-email').value.trim();
        const address = document.getElementById('c-address').value.trim();
        const time = document.getElementById('c-time').value;
        const instruction = document.getElementById('c-instruction').value.trim();

        if(!name || !phone || !email || !time) { alert("Please fill in Name, Phone, Email and Time."); return; }
        if(type === 'Delivery' && !address) { alert("Please fill in the Delivery Address."); return; }
        if (!/^[0-9]{10,12}$/.test(phone)) { alert("Strict Policy: Phone number must be 10-12 digits."); return; }
        if (!email.includes('@')) { alert("Strict Policy: Invalid Email."); return; }

        const orderId = Math.floor(100000 + Math.random() * 900000);
        const now = new Date();
        const timeString = now.toLocaleString('en-IN', { dateStyle: 'medium', timeStyle: 'short' });

        let msg = `*New Order @ Caf√© Cloud Club*\n`; 
        msg += `*Type:* ${type.toUpperCase()}\n*Time:* ${timeString}\n*Order ID:* ${orderId}\n---------------------------\n`;
        msg += `*Name:* ${name}\n*Phone:* ${phone}\n*Email:* ${email}\n*Time:* ${time}\n`;
        if(type === 'Delivery') msg += `*Address:* ${address}\n`;
        if(instruction) msg += `*Note:* ${instruction}\n`;
        
        msg += `---------------------------\n*ITEMS:*\n`;
        let subTotal = 0; let packingTotal = 0;
        const fiveRsCats = ["Bun-Tastic Burgers", "Freshly Folded", "Toasty Treats"];

        for(let key in cart) {
            let item = cart[key];
            let lineTotal = item.price * item.qty;
            subTotal += lineTotal;
            let chargePerItem = 10;
            if (item.category === 'ADD-ON') chargePerItem = key.startsWith("Hummus") ? 7 : 5;
            else if (fiveRsCats.includes(item.category)) chargePerItem = 5;
            packingTotal += (chargePerItem * item.qty);
            if (key.includes("Tossed Rice") || key.includes("Sorted / Boiled Vegges")) packingTotal += (7 * item.qty);
            msg += `‚Ä¢ ${key} x ${item.qty} = Rs. ${lineTotal}\n`;
        }
        
        let discountVal = 0; let couponName = "";
        // Re-calculate discount for WhatsApp message
        if(activeCoupon === 'WEDSTEAK') { couponName = "WEDSTEAK"; discountVal = parseInt(document.getElementById('discount-total').innerText.replace(/[^\d]/g, '')); }
        else if(activeCoupon === 'WEDSHAKE') { couponName = "WEDSHAKE"; discountVal = parseInt(document.getElementById('discount-total').innerText.replace(/[^\d]/g, '')); }
        else if(activeCoupon) { 
             couponName = activeCoupon;
             discountVal = parseInt(document.getElementById('discount-total').innerText.replace(/[^\d]/g, ''));
        }

        let grandTotal = (subTotal - discountVal) + packingTotal;
        msg += `---------------------------\nSub Total: Rs. ${subTotal}\n`;
        if (discountVal > 0) msg += `*Coupon (${couponName}): -Rs. ${discountVal}*\n`;
        msg += `Packing: Rs. ${packingTotal}\n*TOTAL: Rs. ${grandTotal}*\n`;
        if(type === 'Delivery') msg += `\n_Delivery fee calculated by agent._`;

        const encodedMsg = encodeURIComponent(msg);
        const finalUrl = `https://wa.me/${whatsappNumber}?text=${encodedMsg}`;

        document.getElementById('main-dashboard').style.display = 'none';
        document.getElementById('checkout-modal').style.display = 'none';
        document.getElementById('success-view').style.display = 'flex';
        document.getElementById('customer-name-display').innerText = name;
        document.getElementById('send-wa-btn').onclick = function() { window.open(finalUrl, '_blank'); };
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderMenu();
        const cInput = document.getElementById('coupon-input');
        const cBtn = document.getElementById('coupon-apply-btn');
        cInput.addEventListener('input', function() { cBtn.disabled = this.value.trim().length === 0; });
        
        // Show today's offer
        const dayIndex = new Date().getDay();
        document.getElementById("daily-special-container").style.display = "block";
        const todaysOffer = document.getElementById("offer-" + dayIndex);
        if(todaysOffer) todaysOffer.style.display = "block";
    });

</script>
</body>
</html>