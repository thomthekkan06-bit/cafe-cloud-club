<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caf√© Cloud Club | New Year 2026</title>

    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Courier+New:wght@700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="css/style.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5LVP4VMKFW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5LVP4VMKFW');
    </script>
</head>
<body>

    <canvas id="fireworks-canvas"></canvas>

    <div id="preloader">
        <div class="morph-loader-container">
            <div class="loader-satellite"></div>
            <div class="loader-main-circle">
                <i class="fas fa-glass-cheers loader-icon icon-1"></i>
                <i class="fas fa-hamburger loader-icon icon-2"></i>
                <i class="fas fa-clock loader-icon icon-3"></i>
            </div>
        </div>
        <div class="loader-text">Caf√© Cloud Club</div>
        <div class="loader-subtext">Counting down to 2026...</div>
    </div>

    <div id="offers-view" class="offers-view">
        <div style="max-width: 600px; margin: 0 auto;">
            <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:20px;">
                <button class="back-btn" onclick="toggleOffersPage()" style="background:none; border:1px solid #444; color:#fff; padding:8px 15px; border-radius:20px; cursor:pointer;">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h2 style="margin:0; color:var(--primary);">OFFER ZONE</h2>
                <div style="width:70px;"></div>
            </div>

            <div class="offer-full-card" style="border-color: var(--primary); box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);">
                <div class="offer-upper">
                    <div style="background:var(--primary); color:black; display:inline-block; padding:3px 8px; font-weight:bold; font-size:0.7rem; border-radius:4px; margin-bottom:5px;">NEW YEAR SPECIAL</div>
                    <div class="offer-title">Welcome 2026 üéâ</div>
                    <div class="offer-desc">
                        Get flat <strong>20% OFF</strong> on all Steaks & Premium Shakes.<br>
                        Celebrate the new beginning with a feast!
                    </div>
                </div>
                <div class="offer-lower">
                    <button class="offer-code-display" onclick="copyCode('NEWYEAR26')">
                        <i class="fas fa-copy"></i> NEWYEAR26
                    </button>
                </div>
            </div>

            <div class="offer-full-card">
                <div class="offer-upper">
                    <div class="offer-title">Combo 15% OFF</div>
                    <div class="offer-desc">Buy 1 Burger + 1 Fries + 1 Drink to get discount.</div>
                </div>
                <div class="offer-lower">
                    <button class="offer-code-display" onclick="copyCode('CLOUD15')"><i class="fas fa-copy"></i> CLOUD15</button>
                </div>
            </div>
            
            <div style="text-align:center; color:#666; font-size:0.8rem; margin-top:20px;">
                Offers valid till Jan 5th, 2026. T&C Apply.
            </div>
        </div>
    </div>

    <div class="success-screen" id="success-view">
        <div class="success-icon-container">
            <div class="checkmark-draw" style="border-color:white;"></div>
        </div>
        <h1 style="color:var(--primary); margin-bottom:10px;">Order Confirmed!</h1>
        <p style="color:#aaa; text-align:center; margin-bottom:30px;">Your first meal of the year is on its way!</p>
        
        <div style="width:100%; max-width:300px;">
            <button class="whatsapp-final-btn" id="send-wa-btn">
                <i class="fab fa-whatsapp"></i> Send to WhatsApp
            </button>
            <button class="funny-retry-btn" onclick="returnToMenu()" style="width:100%;">
                Back to Menu
            </button>
        </div>
    </div>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div class="dashboard" id="main-dashboard">
        
        <div class="left-sidebar">
            <div style="text-align:center; margin-bottom:20px;">
                <div class="brand-title">CLOUD CLUB</div>
                <div class="brand-subtitle">Cafe & Eatery</div>
                <div class="brand-est">Est. 2021</div>
            </div>

            <div class="store-timings-box">
                <h2 style="color:var(--primary)"><i class="far fa-clock"></i> Holiday Hours</h2>
                <div class="timing-row">
                    <span>Open Till:</span>
                    <span style="color:white; font-weight:bold;">3:00 AM</span>
                </div>
                <div class="timing-row">
                    <span>Status:</span>
                    <span style="color:var(--veg-color);">Serving Now</span>
                </div>
            </div>

            <div class="filter-list">
                <div class="filter-item offers-link-btn" onclick="toggleOffersPage()">
                    <i class="fas fa-gift"></i> New Year Offers
                </div>
                
                <div style="margin-bottom:10px;">
                     <button class="reorder-btn" onclick="repeatLastOrder()">
                        <i class="fas fa-history"></i> Repeat Last Order
                    </button>
                </div>

                <div class="filter-item active" onclick="setCategoryFilter('All', this)">All Items</div>
                <div class="filter-item" onclick="setCategoryFilter('Bun-Tastic Burgers', this)">Burgers</div>
                <div class="filter-item" onclick="setCategoryFilter('Butcher\'s Best', this)">Steaks</div>
                <div class="filter-item" onclick="setCategoryFilter('Italian Indulgence', this)">Pastas</div>
                <div class="filter-item" onclick="setCategoryFilter('Freshly Folded', this)">Wraps & Rolls</div>
                <div class="filter-item" onclick="setCategoryFilter('Whipped Wonders', this)">Premium Shakes</div>
                <div class="filter-item" onclick="setCategoryFilter('Icy Sips', this)">Mojitos & Chillers</div>
                <div class="filter-item" onclick="setCategoryFilter('Nibbles & Bits', this)">Fries & Sides</div>
            </div>
            
            <div class="dev-credit">
                <span>Tech by</span> <a href="#">Thomsons Networks</a>
            </div>
        </div>

        <div class="main-content">
            
            <div class="countdown-container">
                <div class="countdown-title">COUNTDOWN TO 2026</div>
                <div class="countdown-timer">
                    <div class="time-unit">
                        <span class="time-val" id="d">00</span>
                        <span class="unit-label">DAYS</span>
                    </div>
                    <span style="color:var(--primary)">:</span>
                    <div class="time-unit">
                        <span class="time-val" id="h">00</span>
                        <span class="unit-label">HRS</span>
                    </div>
                    <span style="color:var(--primary)">:</span>
                    <div class="time-unit">
                        <span class="time-val" id="m">00</span>
                        <span class="unit-label">MIN</span>
                    </div>
                    <span style="color:var(--primary)">:</span>
                    <div class="time-unit">
                        <span class="time-val" id="s">00</span>
                        <span class="unit-label">SEC</span>
                    </div>
                </div>
            </div>

            <div class="header-bar">
                <button class="mobile-menu-btn" onclick="toggleSidebar()" aria-label="Open Menu">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="search-box">
                    <i class="fas fa-search" style="color: #666;"></i>
                    <input type="text" id="search-input" placeholder="Search menu..." onkeyup="updateSearch()">
                </div>
            </div>

            <div class="news-ticker-area">
                <div class="ticker-label">HAPPY NEW YEAR</div>
                <div class="ticker-content" id="daily-ticker-text">
                    Welcome to 2026! üéâ Try our Special New Year Steaks & Shakes! Open till 3 AM for all your cravings. üéÜ
                </div>
            </div>

            <div class="promo-section">
                <div class="promo-card bg-gradient-3" onclick="copyCode('NEWYEAR26')">
                    <h3>20% OFF</h3>
                    <p>Celebration Special<br>On Steaks & Shakes</p>
                    <div class="code-badge">Code: NEWYEAR26</div>
                </div>
                <div class="promo-card bg-gradient-1" onclick="copyCode('CLOUD15')">
                    <h3>Combo Deal</h3>
                    <p>Burger + Fries + Drink<br>Flat 15% OFF</p>
                    <div class="code-badge">Code: CLOUD15</div>
                </div>
                <div class="promo-card bg-gradient-2" onclick="copyCode('FRIFRIES')">
                    <h3>Loaded Fries</h3>
                    <p>Chicken / Veg<br>Starts @ ‚Çπ119</p>
                    <div class="code-badge">Code: FRIFRIES</div>
                </div>
            </div>

            <div class="advanced-filters">
                <select class="adv-select" onchange="setSort(this.value)">
                    <option value="default">Sort By...</option>
                    <option value="low-high">Price: Low to High</option>
                    <option value="high-low">Price: High to Low</option>
                </select>
                <div class="toggle-chip" onclick="toggleUnder200(this)">
                    Under ‚Çπ200
                </div>
                 <div class="toggle-chip" onclick="setType('veg')">Veg</div>
                 <div class="toggle-chip" onclick="setType('non-veg')">Non-Veg</div>
            </div>

            <div class="menu-grid" id="menu-root">
                </div>

            <button class="mobile-cart-btn" onclick="toggleCartPage()">
                <i class="fas fa-shopping-bag"></i> Cart <span id="mobile-count">(0)</span>
            </button>
        </div>

        <div class="order-sidebar" id="cart-sidebar">
            <div class="cart-header-mobile">
                <button class="back-btn" onclick="toggleCartPage()">
                    <i class="fas fa-arrow-left"></i> Back to Menu
                </button>
            </div>

            <div class="section-title">Current Order</div>
            
            <div class="cart-items-container" id="cart-items-list">
                </div>
            
            <div class="coupon-section">
                <input type="text" id="coupon-input" class="coupon-input" placeholder="CODE">
                <button class="coupon-btn" id="coupon-apply-btn" onclick="applyCoupon()" disabled>APPLY</button>
            </div>
            <div id="coupon-msg" class="coupon-msg"></div>

            <div class="cart-summary">
                <div class="summary-row">
                    <span>Sub Total</span>
                    <span id="sub-total">‚Çπ0</span>
                </div>
                <div class="summary-row">
                    <span>Packing</span>
                    <span id="packing-total">‚Çπ0</span>
                </div>
                <div class="summary-row" id="discount-row" style="display:none; color:var(--primary);">
                    <span>Discount</span>
                    <span id="discount-total">-‚Çπ0</span>
                </div>
            
                <div class="summary-row summary-total">
                    <span>Total</span>
                    <span id="grand-total">‚Çπ0</span>
                </div>
                <button class="checkout-btn" id="main-checkout-btn" onclick="openCheckoutModal()" disabled>Cart Empty</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="checkout-modal">
        <div class="modal-card">
            <h3 style="margin-top:0; color:var(--primary);">Checkout</h3>
            
            <div class="radio-group" style="border-bottom:1px solid #333; margin-bottom:15px; padding-bottom:10px;">
                <label style="margin-right:15px; cursor:pointer;"><input type="radio" name="orderType" value="Delivery" checked onchange="toggleOrderFields()"> Delivery</label>
                <label style="cursor:pointer;"><input type="radio" name="orderType" value="Pickup" onchange="toggleOrderFields()"> Pickup / Dine-In</label>
            </div>

            <div class="input-group">
                <label>Full Name</label>
                <input type="text" class="input-field" id="c-name" placeholder="Name">
            </div>
            <div class="input-group">
                <label>Phone (10 digits)</label>
                <input type="tel" class="input-field" id="c-phone" placeholder="9876543210">
            </div>
            <div class="input-group">
                <label>Email</label>
                <input type="email" class="input-field" id="c-email" placeholder="email@example.com">
            </div>

            <div class="input-group">
                <label id="time-label">Preferred Time</label>
                <select class="input-field" id="c-time" style="background:#000; color:white;">
                    <option value="ASAP" selected>ASAP (Standard)</option>
                    <option value="30 Mins">In 30-45 mins</option>
                    <option value="1 Hour">In 1 Hour</option>
                </select>
            </div>

            <div id="address-group">
                <div class="input-group">
                    <label>House / Flat No.</label>
                    <input type="text" class="input-field" id="addr-house" placeholder="House Name">
                </div>
                <div class="input-group">
                    <label>Main Town</label>
                    <select class="input-field" id="addr-street" onchange="updateSubLocations()" style="background:#000; color:white;">
                        <option value="" disabled selected>Select Town...</option>
                        <option value="Muringoor">Muringoor</option>
                        <option value="Chalakudy">Chalakudy</option>
                        <option value="Koratty">Koratty</option>
                        <option value="Divine Nagar">Divine Nagar</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div id="sub-location-wrapper" style="display:none; margin-bottom:15px;">
                     <select class="input-field" id="addr-sub-street" style="background:#000; color:white;"></select>
                </div>
                <div class="input-group">
                    <label>Landmark</label>
                    <input type="text" class="input-field" id="addr-landmark" placeholder="Nearby Landmark">
                </div>
                
                <div style="margin-top:10px;">
                     <label style="display:flex; justify-content:space-between;">
                        <span style="font-size:0.8rem; color:#888;">Pin Location</span>
                        <button type="button" onclick="locateUser()" style="background:var(--primary); border:none; border-radius:4px; font-size:0.7rem; cursor:pointer;">Locate Me</button>
                     </label>
                     <div id="delivery-map" style="height:150px; width:100%; border-radius:8px; margin-top:5px; border:1px solid #444;"></div>
                     <input type="hidden" id="geo-lat"><input type="hidden" id="geo-lng">
                </div>
            </div>
            
            <div class="input-group" style="margin-top:10px;">
                <label>Special Instructions</label>
                <textarea class="input-field" id="c-instruction" rows="1" placeholder="Optional"></textarea>
            </div>

            <div style="margin-top:15px; display:flex; align-items:center; gap:10px;">
                <input type="checkbox" id="tnc-confirm" onchange="toggleFinalButton()">
                <label for="tnc-confirm" style="font-size:0.8rem; color:#aaa;">I agree to Terms & Conditions</label>
            </div>

            <button class="checkout-btn" id="final-submit-btn" onclick="finalizeOrder()" disabled style="opacity:0.5;">Confirm Order</button>
            <button style="width:100%; background:none; border:none; color:#666; padding:10px; cursor:pointer;" onclick="closeCheckoutModal()">Cancel</button>
        </div>
    </div>

    <div class="modal-overlay" id="customization-modal">
        <div class="modal-card">
            <div style="display:flex; justify-content:space-between; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:15px;">
                <h3 id="modal-item-title" style="margin:0; color:var(--primary);">Item Name</h3>
                <span onclick="closeCustomizationModal()" style="cursor:pointer; font-size:1.5rem;">&times;</span>
            </div>
            <p id="modal-item-base-price" style="color:#888; font-size:0.9rem; margin-bottom:15px;"></p>
            <div id="modal-options-wrapper" style="max-height:200px; overflow-y:auto; margin-bottom:15px;"></div>
            
            <div style="border-top:1px solid #333; padding-top:15px; display:flex; justify-content:space-between; align-items:center;">
                <div style="font-weight:bold; font-size:1.1rem;">Total: <span id="modal-live-total" style="color:var(--primary);">0</span></div>
                <button onclick="addToCartFromModal()" style="background:var(--primary); border:none; padding:10px 20px; border-radius:8px; font-weight:bold; cursor:pointer;">Add</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="upsell-modal">
        <div class="modal-card" style="text-align:center;">
            <div style="font-size:3rem; margin-bottom:10px;">üçü</div>
            <h3 style="margin-top:0; color:var(--primary);">Make it a Meal?</h3>
            <p style="color:#ccc; margin-bottom:20px;">Add Salted Fries for just ‚Çπ100?</p>
            <div style="display:flex; gap:10px; justify-content:center;">
                <button onclick="acceptUpsell()" style="background:var(--veg-color); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:bold;">Yes, Add Fries</button>
                <button onclick="closeUpsell()" style="background:#333; color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer;">No Thanks</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>

    <script>
        // --- COUNTDOWN TIMER LOGIC ---
        function updateCountdown() {
            const now = new Date();
            // Target: Jan 1, 2026
            const nextYear = 2026;
            const newYearDate = new Date(`January 1, ${nextYear} 00:00:00`).getTime();
            const diff = newYearDate - now.getTime();

            if (diff > 0) {
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('d').innerText = d < 10 ? '0' + d : d;
                document.getElementById('h').innerText = h < 10 ? '0' + h : h;
                document.getElementById('m').innerText = m < 10 ? '0' + m : m;
                document.getElementById('s').innerText = s < 10 ? '0' + s : s;
            } else {
                document.querySelector('.countdown-container').innerHTML = 
                    "<h2 style='color:var(--primary); margin:0; font-size:1.5rem;'>HAPPY NEW YEAR 2026! ü•Ç</h2>";
            }
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- CANVAS FIREWORKS ---
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                // Burst effect
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 4 + 1;
                this.vx = Math.cos(angle) * velocity;
                this.vy = Math.sin(angle) * velocity;
                this.alpha = 1;
                this.color = color || `hsl(${Math.random() * 50 + 30}, 100%, 50%)`; // Gold spectrum
                this.decay = Math.random() * 0.015 + 0.005;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.05; // Gravity
                this.alpha -= this.decay;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // Auto-launch fireworks
        function launchFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height / 2); // Top half
            const color = Math.random() > 0.5 ? '#D4AF37' : '#FFFFFF'; // Gold or White
            
            for (let i = 0; i < 40; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        function animate() {
            // Trail effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Randomly launch
            if (Math.random() < 0.03) launchFirework();

            particles.forEach((p, index) => {
                p.update();
                p.draw();
                if (p.alpha <= 0) particles.splice(index, 1);
            });

            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
